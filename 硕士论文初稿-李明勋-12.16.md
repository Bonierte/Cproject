学校代码： 10385 分类号：（可不填）

研究生学号：23013080027 密 级： （不填）

**船用齿轮传动装置强制润滑系统仿真算法研究及软件开发**

**Research on Simulation Algorithm and Software Development for Forced Lubrication System of Marine Gear Transmission Devices**

作者姓名： **李明勋**

指导教师： **王希贵教授**

学 科： **（四号宋体加粗）**

研究方向： **（四号宋体加粗）**

所在学院： **（四号宋体加粗）**

论文提交日期：**……年…月…日**

摘 要

在

……

~~关键词：~~

**Abstract**

~~Cutting~~

~~……~~

**~~Keywords:~~**

目 录

[第1章 绪论 1](#_Toc216774273)

[1.1 研究背景与意义 1](#_Toc216774274)

[1.2 国内外研究现状 2](#_Toc216774275)

[1.2.1 润滑系统发展现状 2](#_Toc216774276)

[1.2.2 润滑系统液压元件模型库构建 3](#_Toc216774277)

[1.2.3 管道流体仿真算法研究 3](#_Toc216774278)

[1.2.4 润滑系统仿真设计软件开发 5](#_Toc216774279)

[1.3 主要研究内容 6](#_Toc216774280)

[第2章 船用齿轮传动装置润滑系统仿真平台架构设计 8](#_Toc216774281)

[2.1 滑油系统设计仿真平台架构设计 8](#_Toc216774282)

[2.1.1 仿真设计平台功能分析 10](#_Toc216774283)

[2.1.2 仿真设计平台主要内容 11](#_Toc216774284)

[2.1.3 参数化设计仿真流程 11](#_Toc216774285)

[2.2 管件数据库建立 11](#_Toc216774286)

[2.3 仿真计算算法 11](#_Toc216774287)

[2.4 工程仿真软件开发 11](#_Toc216774288)

[2.4.1 仿真流程与数据管理实现 11](#_Toc216774289)

[2.4.2 正常工况下系统性能仿真与分析 11](#_Toc216774290)

[2.4.3 典型故障工况模拟与影响分析 11](#_Toc216774291)

[2.4.4基于仿真的参数优化设计 11](#_Toc216774292)

[2.5 本章小结 11](#_Toc216774293)

[第3章 润滑系统数学建模与数值求解方法 12](#_Toc216774294)

[3.1 润滑系统的数学模型 12](#_Toc216774295)

[3.1.1 质量守恒与连续性方程 12](#_Toc216774296)

[3.1.2 伯努利方程 13](#_Toc216774297)

[3.2 润滑系统部件压力损失模型 14](#_Toc216774298)

[3.2.1 管路系统压力损失模型类型 14](#_Toc216774299)

[3.2.2 直管压力损失模型 15](#_Toc216774300)

[3.2.3 弯头压力损失模型 16](#_Toc216774301)

[3.2.4 变径管压力损失模型 18](#_Toc216774302)

[3.2.5 三通管压力损失与流量分配模型 20](#_Toc216774303)

[3.2.6 阀门压力损失与流量分配模型 22](#_Toc216774304)

[3.2.7 泵的压力-流量特性模型 23](#_Toc216774305)

[3.3 润滑系统的数值求解办法 24](#_Toc216774306)

[3.3.1 管路流导分析 24](#_Toc216774307)

[3.3.2 节点压力计算法 27](#_Toc216774308)

[3.3.3 有限体积法（FVM） 30](#_Toc216774309)

[3.3.4 基于公开数据的算法性能对比 33](#_Toc216774310)

[3.4 本章小结 35](#_Toc216774311)

[第4章 润滑系统仿真计算算法研究 36](#_Toc216774312)

[4.1 LAHI分层自适应混合迭代法设计 36](#_Toc216774313)

[4.1.1 基于非线性强度的计算分层策略 36](#_Toc216774314)

[4.1.2 线性子网求解办法 38](#_Toc216774315)

[4.1.3 非线性元件局部计算与全局迭代机制 39](#_Toc216774316)

[4.2 算法收敛性和鲁棒性增强机制 40](#_Toc216774317)

[4.2.1 全局残差监控与收敛依据 40](#_Toc216774318)

[4.2.2 稀疏线性系统高效存储与求解技术 42](#_Toc216774319)

[4.2.3 非线性迭代的动态松弛与更新策略 43](#_Toc216774320)

[4.2.4 算法鲁棒性与容错增强 44](#_Toc216774321)

[4.3 LAHI算法性能验证与对比分析 46](#_Toc216774322)

[4.3.1 测试案例设计 46](#_Toc216774323)

[4.3.2 收敛性与计算效率对比分析 48](#_Toc216774324)

[4.4 液压元件参数化模型库构建 52](#_Toc216774325)

[4.4.1 润滑系统模型库组件类别 52](#_Toc216774326)

[4.4.2 模型库的数据结构与接口设计 53](#_Toc216774327)

[4.4.3 模型库的数据库结构和管理 54](#_Toc216774328)

[4.5 滑油系统仿真平台集成与实现 57](#_Toc216774329)

[4.5.1 仿真平台的总体架构 57](#_Toc216774330)

[4.5.2 系统前端架构与使用界面介绍 58](#_Toc216774331)

[4.5.3 后端仿真计算服务集成 64](#_Toc216774332)

[4.6 本章小结 65](#_Toc216774333)

[第5章 工程验证与多工况性能测试 65](#_Toc216774334)

[5.1 验证目的与方案 65](#_Toc216774335)

[5.2 管路试验台设计与搭建 66](#_Toc216774336)

[5.3 实验方法与测试工况 67](#_Toc216774337)

[5.4 结果对比与分析 67](#_Toc216774338)

[5.5 本章小结 67](#_Toc216774339)

[第6章 结论与工业应用展望 68](#_Toc216774340)

主要符号对照表

第1章 绪论

1.1 研究背景与意义

工业软件是建设现代化产业体系、推动制造业高质量发展的重要基础和核心支撑，工业和信息化部印发《“十四五”软件和信息技术服务业发展规划》，针对软件产业链升级，部署了重点突破工业软件、提升工业软件供给能力、开展工业技术软件化推广、完善工业软件产业生态等任务\[1\]。面向船舶、电力、石油石化等重点行业，国内企业聚焦产业发展瓶颈，研究并发布了一批产品，创新成果不断涌现。工业软件的创新与发展，是加快我国工业制造业数字化升级的重要支撑。

强制润滑是一种特殊的润滑方式，其通过外力主动将润滑油输送到设备关键部位，确保设备在高负荷和复杂工况下仍然能够持续、均匀地提供润滑油，避免因润滑不足导致的设备故障\[2\]。在大型船舶齿轮传动系统中，系统长时间运行在高负荷、高损耗的条件下，齿轮间的磨损和热量积聚极易导致设备故障。强制润滑系统通过管路系统将润滑油输送到每一个齿轮和轴承，确保其在各种工况下都能保持正常运转，极大提高了船舶齿轮传动系统的可靠性和使用寿命。润滑油的有效传输和分配是保障系统正常运转的关键环节。传统方法可以通过设计管路进行试验来达到强制润滑系统设计的目的，但随着船舶工业的迅速发展，所配置的强制润滑系统越来越复杂，专用零部件也越来越多。因此，引入强制润滑系统仿真设计软件可以大大提高工作效率，降低实验成本，符合中国制造业数字化产业升级的发展方向。

随着计算机技术的飞速发展，计算机技术与工业设计的融合使得设计过程更加高效、精准和灵活。通过计算机建模、仿真，工程师可以在设计阶段对复杂的工作系统进行虚拟测试和性能评估，大大缩短了研发周期，降低了试验过程中的试错成本。通过建模强制润滑系统并对其进行整体仿真与分析，工程师可以在具体实验之前预测到系统的工作状态。这种融合不仅提升了产品的设计和工作质量，还推动了制造业的数字化和智能化发展。

1.2 国内外研究现状

1.2.1 润滑系统发展现状

19世纪，润滑油开始广泛应用于机械设备中以减少摩擦和磨损，特别是在高速旋转的机器部件中。这个时期，润滑系统的主要功能是通过油槽和油杯等简单装置，让润滑油通过重力或毛细作用流向机械的各个润滑点。随着工业设备的进一步发展，尤其是内燃机的发明与广泛应用，传统的重力或自然流动润滑方式已经无法满足高速、重载设备的需求。强制润滑系统的概念在20世纪初逐渐成形，在20世纪20年代和30年代的汽车工业和航空工业快速发展时，强制润滑系统得到了进一步完善。最早的强制润滑系统应用于早期的内燃发动机和航空发动机中。这些系统通过机械泵主动将润滑油送至各个需要润滑的部位，以确保即使在高速旋转和高负载条件下，各部件仍能得到持续有效的润滑，减少摩擦和热量积聚。强制润滑系统解决了传统润滑方式中油流不均匀和润滑不足的问题，大大提高了机械设备的使用寿命和可靠性。

20世纪中期，随着汽车、航空航天、发电设备、重型机械以及大型船舶等复杂系统的快速发展，强制润滑系统进一步完善和普及。特别是在大型船舶的齿轮传动系统中，强制润滑系统成为必不可少的组成部分。这些系统通过泵、滤清器、冷却器和管路系统将润滑油精确分配至机械的各个齿轮和轴承，确保设备的稳定运行。

润滑系统的演变从简单的自然流动系统逐渐发展到复杂的强制润滑系统，适应了工业革命和现代机械设备日益提高的需求。强制润滑系统的完善和普及标志着润滑技术进入了一个新的阶段，特别是在高性能机械设备（如汽车、航空发动机、大型船舶等）中起到了至关重要的作用。英、美、法等发达国家在这时开始建立润滑技术的研发中心和相应的科研团队，如美国的动力传输研究室、普惠公司轴承密封发展分部等\[3-4\]。由于具备科学和完善润滑系统部件性能的分析方法，经过长期试验数据的积累，建立了科学的发动机润滑系统数学模型，并开发了性能仿真平台。通过模拟润滑油在系统中的流动、压力分布和温度变化，仿真平台为设计和优化润滑系统提供了强大的技术支持。现代船舶滑油系统的复杂性日益增加，而流体仿真平台能够在计算机平台对系统进行详细的分析和优化，减少物理实验的时间和成本，为润滑系统的智能化开发和高效运行提供可靠的技术基础。

1.2.2 润滑系统液压元件模型库构建

在大型机械的强制润滑装置领域，德国的MAN Energy Solutions和挪威的Kongsberg等企业，借助多物理场仿真技术，建立了涵盖泵、冷却器、阀门等元件的标准化模型库。这些模型用于仿真分析润滑系统中液体流动、压力损失和温度变化\[5\]，不仅支持常规的模块化和参数化建模，还通过多物理场仿真工具例如AMESim和Fluent来实现元件间相互作用的耦合分析，提供更加精确的仿真结果。

国内的模型库建设主要依托于高校与研究机构的联合开发，如上海交通大学、哈尔滨工程大学和中国船舶集团，开发了针对齿轮箱润滑系统的仿真计算平台。西北工业大学闫星辉与中国航空发动机集团有限公司基于滑油系统元部件流量、换热和压力特性在MATLAB/Simulink下开发了通用仿真模块库，构建了包含供油、回油、通风和热力系统的全系统仿真模型\[6-7\]。以此模型库为基础进行滑油系统仿真建模分析，其计算结果与主流商业软件Flowmaster相对误差在3.8%以下\[8-9\]，实现了高精度建模与行业专有模型库。这些模型库满足复杂工况下多元件组合仿真分析的需求。目前，国内在逐步推动液压元件数据库的标准化建设，旨在提升模型库在国内的实用性和复用性，加快润滑系统设计和开发过程。

随着船舶装备国产化进程的加快，自主研发的液压元件模型库能够更加贴合国内船舶系统的实际需求\[10\]，为系统设计、故障诊断及性能优化提供精准的仿真支持。推动国内润滑系统液压元件自主模型库的构建有助于推动行业标准化，提高各企业之间的数据共享和协同能力，进一步加快新型船舶润滑系统的研发进度，提升我国在船舶工业领域的核心竞争力。

1.2.3 管道流体仿真算法研究

管道流体仿真算法在工程设计和流体动力学领域起到重要的作用，例如在石油天然气、化工、船舶、航空航天等领域。通过仿真算法，工程师可以模拟和预测管道中的流体流动行为、压力分布、流量分配等参数，以优化管道设计、提高系统效率并降低成本\[9\]。随着计算机性能和数值仿真方法的发展，管道流体仿真算法经历了从简单的稳态计算模型到复杂的非线性、动态仿真算法的演变。

早期的管道流体仿真算法主要基于稳态流动方程（如Bernouili方程、Darcy-Weisbach公式）进行计算。这类算法假设管道内的流体是一个整体处于稳态，即流体在整个系统中始终保持恒定的流量和压力分布。随着计算机性能的提高，数值仿真方法开始被广泛应用于管道流体仿真中。将连续的流体离散化，分成可计算的单元，以求解复杂的流体流动问题\[10-11\]。以下对数值仿真方法进行举例描述，有限差分法（FDM）通过将管道流体的连续方程（如Navier-Stokes方程）在空间和时间上离散化，求解每个离散点的流体参数，但该方法在复杂几何结构的管道中，灵活性较差。有限元法（FEM）在处理复杂几何形状和边界条件时表现出色。通过将管道划分为多个小单元，FEM可以精确求解局部流场的变化情况，特别适合处理复杂的管路系统。有限体积法（FVM）在工程应用中广泛使用，特别是在计算流体力学（CFD）领域\[12-14\]。该方法通过对控制体积的流量守恒进行计算，能够保证全局流动的质量、动量和能量守恒，适用于多相流、湍流等复杂流动情况的模拟。

对于管道内部流体分析，例如当前的主流仿真软件Flowmaster等是采用以管道节点为参考点，采用节点压力网络算法，将管路结构识别为一张网，西北工业大学赖峰等\[15\]认为基本思想是将内流系统抽象离散化为由节点和元件组成的网络。节点代表实际内流系统中各物理部件的进出口,而元件代表实际内流系统中的各物理部件。那么只需要将元件进出口的变量获取，再对元件进行线性化分析，就可以将元件进出口压力损失与元件本身特性建立方程，从而可以根据进口或出口数据求得未知数据，那么整个管路结构就是一个个方程所组成的联合方程组\[16\]，但使用这种算法进行仿真计算时，部分情况下，开发者会忽略换热所带来的影响，一方面是因为工作环境中温度的变化可以忽略不计，另一方面则是考虑换热的算法较为复杂\[17\]。

那么元件的线性化处理就变成算法中至关重要的影响因素，计算元件的特性参数，吴琼宵\[18\]在她的论文中采用建模分析软件对所需要的管件进行建模，然后分析管件特性比如滑油泵、阀门、油箱、滤油器、冷却器等，建立每个管件的流动方程，实现管件的线性化分析。在元件线性化的基础上，标准的方程组建立是建立三大方程：质量流量守恒方程，压力损失方程以及换热方程。一个元件应当对应这三个方程，整个管路中所有的元件组成的方程组，通过对方程组的求解可以求得每个元件进出口压力和流量。当前的管道流体网络算法按照这种方法做的占大多数，还有一种方法是从起点出油点出发，依照流体的性质与管件的类型判断流体的流向，对流经的管件进行压力与流量计算\[19-21\]，这样可以通过模块化设计每个管件的计算算法，让使用者更加直观的看到系统的流动模型。与常用算法不同的是这种算法更适合对某一个特定环境下的管路系统模型，更类似于定制化设计算法自身使用。

1.2.4 润滑系统仿真设计软件开发

仿真计算软件开发是一项复杂的工程，涉及需求分析、架构设计、核心算法开发、编码实现、测试验证和发布维护等多个阶段\[24\]。通过这种软件，工程师可以高效、准确地模拟和优化滑油系统的流体动力学行为，从而提高设计效率、降低开发成本、优化系统性能，并显著提升产品的可靠性和市场竞争力。

全球工业设计类软件的开发起步较早，特别是在欧美国家，最早的流体仿真工具是基于简单的流体力学公式，用来计算管道中的流量和压力分布。随着计算能力的提升，仿真软件的功能也越来越强大，能够处理更加复杂的流体流动、湍流、多相流等问题\[25-27\]。这些软件帮助工程师在设计阶段就能对润滑系统进行虚拟测试和优化，从而减少设计错误和昂贵的物理试验。进入21世纪后，仿真软件的应用变得更加广泛，尤其在复杂的机械系统和大型设备中，仿真已成为设计流程中不可或缺的一部分。在流体仿真领域，功能比较强大的Flowmaster最初由英国的Flowmaster Group开发，后来被西门子（Siemens）收购，成为其Simcenter系列中的一部分，其主要用于管路系统的流体仿真，在船舶、汽车和航空航天领域应用广泛。与Flowmaster类似，Fluent由美国Ansys公司开发，是其旗下最重要的计算流体力学（CFD）工具之一，广泛应用于航空航天、汽车制造、能源等多个行业。

工业设计软件已经形成了较为成熟的产业体系和生态链。国际上工业设计软件开发技术发展来源主要集中在欧美国外的一些知名实验室和研究机构，如美国的NASA Ames Research Center、德国的Fraunhofer研究所和英国的剑桥大学工程系流体动力实验室，他们在流体仿真和实验研究方面处于领先地位，依托于自主研发的仿真平台进行前沿研究，并且通过与商业软件开发公司合作，通过实际实验与仿真技术相结合推动包含流体力学分析和管道系统设计功能的大型软件在计算机软件行业的发展。

目前，在流体仿真分析软件领域，不管是从软件复杂程度和适用范围上，在这方面我国的发展远远落后于欧美国家，这正是我国产业数字化转型的重点之一。涉及到流体分析的行业和工作，大部分的研究机构和企业依赖于国外软件进行研究和设计。如Ansys Fluent、Flowmaster等。这些软件虽功能强大，但高昂的使用成本以及其对核心技术的限制，限制了国内企业和科研单位的学习和使用，并且有一定的泄密风险。虽然部分高校和科研院所，已经在这一领域开展了一定研究，开发出了如CFL3D类型的流体分析软件，但国内仿真软件在复杂工业应用中的实际经验不足，尤其在大型设备、复杂系统的流体仿真方面，缺乏长期的应用积累，仍与国际领先水平存在较大差距。国内需要进一步加强流体仿真技术的自主研发，以应对日益复杂的工业应用需求。

国内常见的软件开发方式主要有二次开发和底层代码开发，当前的二次开发基本上通过接入国外软件所提供的API接口，在计算方面达到使用需求，但对软件的独立性有着极大的限制，往往需要与主软件并存才可以成功运行。比如浙江工业大学郭静\[28\]开发的基于有限元分析的压力管道缺陷智能评估软件系统，软件底层分析依靠ANASYS分析模块，能够达到计算需求，但是无法独立运行在不含ANASYS的电脑上。同样，合肥工业大学刘明明\[29\]所开发的基于SolidWorks二次开发的阀门参数化及流体分析系统运行在SolidWorks的二次接口上，通过建立常用的阀门数据库，软件可以在保证精确度的基础上通过调用数据库中的阀门管件最大程度的提高分析效率。通过底层代码进行开发的方式可以解决软件运行的限制，但是给分析计算的精确度提高了难度，开发者需要开发更复杂的计算算法，这也是为什么国外的这些专业软件始终无法简单替代的最大原因。目前已经有越来越多独立仿真设计软件开发\[31\]，尽管这些软件只能替代掉一些大型国外软件的部分功能，但这已经代表工业软件开发被重视起来，例如重庆大学刘桂源\[32\]设计了一款同向平双齿轮传动系统设计分析软件，软件基于同向平双齿轮传动系统进行开发，引入SQLite数据库，并且通过QT开发了模型展示页面，做到了设计和分析的融合。

1.3 主要研究内容

本课题的主要研究内容是为基于中国船舶集团重庆齿轮箱有限公司横向课题，针对企业实际应用问题，开发强制润滑系统仿真计算算法，建立润滑系统管件数据库，采用JavaSprits语言开发强制润滑系统仿真设计平台，实现拥有滑油系统设计、仿真、专用数据库功能的独立软件的开发，提高企业产业综合发展能力。

第一章为绪论，表述了课题的研究背景和意义，介绍了开发滑油系统仿真设计软件相关技术的现状和未来发展趋势。

第二章

第三章

第四章

第五章

第六章

第2章 船用齿轮传动装置润滑系统仿真平台架构设计

1\. 船用齿轮箱润滑系统分析与建模理论

1.1 润滑系统工作机理与关键部件特性分析

1.2 基于集中参数法的一维流体系统建模理论

1.3 三维计算流体力学与传热学基础

1.4 多学科协同仿真理论

**第四章：关键部件多尺度建模与平台集成实现**

- - 齿轮箱内部流场与换热的三维高保真建模与计算
    - 关键部件降阶模型的建立与验证
    - 基于FMI的协同仿真环境搭建与集成
    - 仿真流程与数据管理实现
- **第五章：仿真平台验证与应用案例研究**
    - 模型验证与确认
    - 正常工况下系统性能仿真与分析
    - 典型故障工况模拟与影响分析
    - 基于仿真的参数优化设计

2.1 滑油系统设计仿真平台架构设计

2.1.1平台设计需求与目标

2.1.2平台总体架构(给出架构图)

2.1.3各功能模块详细设计（一维、三维、控制、数据管理）

2.1.4模块间接口与数据交换协议设计

强制润滑系统设计与仿真平台是针对企业实际的需求，改变 传统的以实验设计为基础，依靠国外仿真软件进行滑油系统开发的方式。结合计算机软件开发技术，开发集参数化设计平台、专业管件数据库、仿真计算滑油系统工作状态功能于一体的仿真设计平台。

图 2.1 滑油管路系统设计仿真平台

Fig 2.1 Lubricating oil pipeline system design and simulation platform

滑油管路设计仿真平台主要是由管路设计系统、专业管件数据库、仿真计算模块三个部分组成，如图2.1所示。在滑油管路系统设计与仿真过程中，首先从参数化建模的思想出发，针对船舶润滑行业所需要的管件类型进行建模，建立专业的管件数据库。然后开发滑油管路结构设计模块，将滑油管路结构二维化，并以近似三维的方式显示其结构，并通过结构参数输入以及管件数据库对滑油管路结构进行参数设计和管件选择。最终，在管路系统建模完成之后，通过将整个管路系统数据传递给仿真计算模块，仿真计算模块采取整体结构分析算法，模拟润滑油在系统中的流动状态，对于流经各虚拟管路节点所配置的管件，进行对应的模型计算算法，计算压力损失情况并分析流量分配情况，实现对滑油管路系统的快速仿真计算，并对仿真异常进行分析输出，提供仿真结果可视化输出。通过以上设计分析步骤实现滑油管路从建模设计到仿真计算的全部步骤。

本文研究开发专业管件数据库、仿真计算功能模块、管路结构设计模块形成独立开发运行的仿真设计计算软件。

2.1.1 仿真设计平台功能分析

在滑油管路系统设计过程中，传统的设计方式时通过试验台搭建或者大型的国外仿真设计平台，比如Flowmaster仿真设计软件进行开发和设计。试验台会消耗过多的成本和时间，而国外仿真软件在专业深入上达不到要求，缺少行业专用的管件数据库，并且并不适用于保密或军工类企业。

根据企业需求，本文所开发的仿真设计平台最重要的功能就是在自主设计开发软件的基础上，建立一个以专业数据库为参数化建模基础，集成结构设计和仿真计算功能的仿真设计平台。通过参数化设计的方式建立管路结构，并提供专业管件数据库的管件选取、管路文件的保存与获取以及对管路结构的仿真计算等功能。最终可以确定仿真设计平台功能如下：

（1）提供滑油系统结构设计模块，包括设计操作面板和结构展示窗口，通过操作面板的按钮进行滑油系统结构设计，以点、线近似模拟管路结构，并通过双击点弹出弹窗提供参数修改功能。

（2）建立软件本地管件数据库，整理管件特性参数存储进数据库，能够实现在管路结构设计过程中将指定管件配置到对应结构点。

（3）开发滑油系统仿真计算模块，能够接收到结构展示区域所展示的管路结构及所有参数，并对管路结构进行整体分析，通过调用不同类型管件的计算模型进行压力损失计算和流量分配，实现仿真计算功能。

（4）对已经设计好的管路结构，实现以.json格式的文件导出导入功能，便于不同用户之间的开发交流。对仿真计算结果实现结果展示功能以及Excel结果文件导出功能。

（5）为了便于工程人员分析管路结构，软件界面设计要求简洁明了，功能完善，并且包含操作错误提示，工作状态异常提示，仿真计算结果异常的提示。

2.1.2 仿真设计平台主要内容

滑油管路系统设计仿真平台主要内容为：专业管件数据库、参数化结构设计模块和仿真计算模块如图2.2所示。

参数化结构设计模块主要由操作设计按钮和结构展示以及参数设置三个部分组成，操作设计按钮包括“取点”、“连线”、“油泵”、“多通”、“拖拽”、“删除”。通过取点设计管路结构虚拟节点，并且在取点的基础上可设置油泵和多通这两种特别的节点，通过连线可以将节点串联形成管道，通过这些操作可以设计出视觉上的管路结构，然后通过双击设定的虚拟点可以进行节点高度、所连接的前段管道管径和长度、特殊管件的选择等参数输入，从而实现参数化设计的功能。

2.1.3 参数化设计仿真流程

2.2 管件数据库建立

2.3 仿真计算算法

2.4 工程仿真软件开发

2.4.1 仿真流程与数据管理实现

2.4.2 正常工况下系统性能仿真与分析

2.4.3 典型故障工况模拟与影响分析

2.4.4基于仿真的参数优化设计

2.5 本章小结

第3章 润滑系统数学建模与数值求解方法

强制润滑系统是船舶齿轮传动装置中不可或缺的组成部分，其核心功能是通过外部动力将润滑油输送到齿轮、轴承等关键部件，确保设备在高负荷和复杂工况下仍能保持稳定运行。本章将介绍强制润滑系统的基本工作原理，并针对基础元件（如直管、弯头、多通、渐缩、渐扩等）构建包括流体动力学模型、压力损失模型和流量分配模型在内的综合数学模型，为后续的仿真计算算法提供理论依据。

3.1 润滑系统的数学模型

3.1.1 质量守恒与连续性方程

压力管路是指液体充满全管并流动在一定压差的管路。润滑油在管路系统内部流动遵循从高压区流向低压区，在实际管路中，流体在流动时会与管壁产生粘连，具有这种特性的流体也称粘性流体，粘度系数为其参数。润滑油在管路中也具有这种特性，润滑油在流动时与管壁粘连产生摩擦阻力，润滑油流动需克服这种摩擦做功。润滑油流经任何管路截面都遵循质量守恒定律、动量守恒定律、能量守恒定律。润滑系统的数学模型是仿真设计与优化的核心理论框架，其本质是通过数学方程精确描述润滑油在复杂管路网络中的流动特性，包括质量方程、动量方程、能量方程及管路网络拓扑结构中各个管件损失的计算方法。本节根据流体力学基本原理，当不可压缩的流体在管路中流动时应当满足以上方程。本节基于流体力学基本原理，构建了适用于强制润滑系统的控制方程，并通过矩阵化方法实现全局联立求解，建立润滑系统的数学模型。

在滑油管路系统在工作状态下，润滑系统中任意节点均满足质量守恒定律。对于一个含有N个节点的管路网络，每个节点的质量流量守恒方程可以表示为：

 (3-1)

其中，和分别为流入和流出节点的元件的集合，和为对应元件的体积流量，该方程表明，对于管路中的某一个节点，元件流入其内的流量和等于节点流出到其他元件的流量和，这是管路系统工作的质量守恒特性。

流体在管路中的连续性方程可以通过管路内两处截面上流体的平均流速、平均密度来表示：

 (3-2)

在管路中取两个虚拟点1、2，式(3-2)中、、表示管路中位置1的流体的平均密度、平均流速和管路的横截面面积，、、表示管路中位置2的流体的平均密度、平均流速和管路的横截面面积。方程(3-2)适用于定常流动的不可压缩以及可压缩流体。

对于定常流动的流体：

 (3-3)

此时：

 (3-4)

船舶传动系统所采用的润滑油液体可以看作不可压缩流体，即为固定值，所以在管路内，式(3-4)可以推导为：

 (3-5)

由此也可以看出，当管路中流体为不可压缩流体时，任意一段管道内流体的体积流量都是一定的，也就是说流入流出的体积流量相等，即流入流出质量流量守恒。

当管路直径不变，即截面积时，，此时管路内流速不变，。

3.1.2 伯努利方程

本文所研究的滑油系统润滑油在流动时看作不可压缩的流体，并且在管路中为定常流动，而伯努利方程是压力势能、动能与重力势能的整体平衡表述，因此本文所提到的滑油系统工作原理应满足：

 (3-6)

式(3-6)中为管路系统中流体在某一处截面的平均流速，D为管路直径，可以表示为：

 (3-7)

伯努利方程中表示流体的压力势能，而表示流体在管路中某一界面的动力势能。

在式(3-6)中代表流体的重力势能。为动力势能的修正参数，其值范围为1~2，正常情况下取值为1。为管路的水头损失，其代表流体在管路中从位置1流至位置2所产生的能量损失，包括沿程阻力损失与局部阻力损失。

3.2 润滑系统部件压力损失模型

3.2.1 管路系统压力损失模型类型

强制润滑系统是确保机械设备在高负荷和复杂工况下持续、均匀地提供润滑油的重要装置，广泛应用于船舶、航空、汽车等高端机械设备中。在船用齿轮传动系统中，强制润滑系统通过外部动力（如机械泵）主动将润滑油输送至各个关键部件，润滑油从储油箱中通过油泵被吸取，并经过滤器进行初步过滤，去除其中的杂质。经过过滤后的润滑油通过主油管道进入各分支管路，最终通过管路将润滑油精准送至每个润滑点。为了确保流量均匀和压力稳定，系统内的管路通常设计为多个分支管路，形成一个复杂的流体网络。润滑过后的油液通过回油管道回流至储油箱，形成一个闭环系统。在油箱中，润滑油通常会经过冷却器、过滤器等进一步处理，以保持油质的清洁和适当的温度。强制润滑系统提供连续、均匀的润滑，在高负载和复杂环境下有效避免润滑不足的问题。从而保证了传动系统在良好的状态下运行，提高了整体的运行效率。滑油系统的管路网络简图如下：

流体阻力指单位质量流体的机械能损失。产生这种机械能损失的原因是流体内部的黏性特性，流体在管道中由于摩擦和流体内的涡旋而克服这种摩擦导致的机械能损失称为沿程阻力损失。流体通过各种例如弯头、变径管、三通管等管件，因其流道方向和截面大小变化产生涡旋导致的机械能损失称为局部阻力损失。管路的总阻力损失由沿程阻力损失和局部阻力损两部分组成，由上述分析可以得到：

 (3-8)

式(3-8)中，为管路系统中弯头、三通等管件个数，由此便可以通过对管路系统中的沿程阻力损失和局部阻力损失分别求解得到管路系统整体损失。

3.2.2 直管压力损失模型

在强制润滑系统中，直管作为液压元件的一种基本形式，是润滑油流动过程中最常见的组成部分之一。润滑油通过直管时，靠近管壁流体会由于流体的黏性与管壁产生摩擦，流体的流动需要克服这种摩擦做功，由于流动所产生的阻力即沿程阻力，由此产生的损失在直管段中被称作沿程阻力损失，从而引起压力变化。根据Darcy-Weisbach公式，直管内的压力损失可以表示为：

 (3-9)

式(3-1)中——摩擦系数，无量纲；

——管道直径，mm；

——流体流过的管道长度，m；

——流体在此段管道内的平均速度，m/s；

——重力加速度，m/s<sup>2</sup>。

摩擦系数与管路内流动介质的雷诺数以及管壁的绝对粗糙度有关，雷诺数的定义为：

 (3-10)

式(3-10)中——介质黏度，Pa·s;

——密度，kg/m3;

——密度，m;

——流体流速，m/s。

而绝对粗糙度属于工业管道的本身特性参数，本文所开发的仿真平台应用的传动装置主要采取钢制无缝钢管，其绝对粗糙度为0.02/mm~0.10/mm。通过润滑系统工作时流体参数可以进行雷诺数的求解，再结合管壁的绝对粗糙度进行摩擦系数的计算，如表3-1所示，从而计算指定直管管道的沿程阻力损失。

表3-1 摩擦系数、雷诺数和相对粗糙度的关系

|     |     |     |     |     |
| --- | --- | --- | --- | --- |
| **流体类型** |     | **雷诺数** | **管壁相对粗糙度** | **摩擦系数** |
| 层流  |     |     | 无关  |     |
| 湍流  | 水力光滑管区 |     |     |     |
| 过渡区 | 无关  |     |     |
| 阻力平方区 | 无关  |     |     |

3.2.3 弯头压力损失模型

在强制润滑系统的管路网络中，弯头作为典型的局部阻力元件，它的几何形状突变会导致流体运动方向的突然改变，从而引发流体动能损失，属于局部阻力损失。其数学模型可以表示为：

 (3-11)

式(3-11)中——局部阻力系数，无量纲；

——流体在弯头入口处的平均流速，m/s。

弯头的式样一般有光滑管壁的均匀弯管和折管样式，如图3.1所示，图为90°标准弯管以及普通类型的折管示意图。常用参数包括弯曲半径、管径、角度，折管不考虑弯曲半径参数。

图3.1 光滑管壁弯管与普通类型折管样式图

弯管的阻力系数根据流体力学经验公式所得，如式(3-4)所示，弯管的局部阻力系数与它的几何参数（弯曲半径、管径、弯曲角度）相关，对于船舶润滑系统中常见的钢制标准弯头，层流状态下，弯管的局部阻力系数的计算方式如下：

 (3-12)

当时，阻力系数只与弯曲半径相关，如下表3.2所示，一般的铸铁弯头，其阻力系数为0.9。

表3.2 90度弯头的局部阻力系数

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|     | 0.1 | 0.2 | 0.3 | 0.4 | 0.5 | 0.6 | 0.7 | 0.8 | 0.9 | 1   |
|     | 0.132 | 0.138 | 0.158 | 0.206 | 0.294 | 0.440 | 0.661 | 0.977 | 1.408 | 1.978 |

注：对于粗管壁的铸造弯头，当湍流时的数值会相应增加3~4.5倍

折管的阻力系数同样根据流体力学经验公式所得，如式(3-5)所示，折管的局部阻力系数只与它的几何参数转折角度相关，对于船舶润滑系统中常见的钢制标准弯头，层流状态下，折管的局部阻力系数的计算方式如下：

 (3-13)

折管阻力系数只与转折角度有关，表3.3介绍了部分角度下的这关阻力系数，如下：

表3.3 部分角度下折管的阻力系数

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|     | 20° | 40° | 60° | 80° | 90° | 100° | 110° | 120° | 130° | 160° |
|     | 0.046 | 0.139 | 0.364 | 0.741 | 0.985 | 1.260 | 1.560 | 1.861 | 2.150 | 2.431 |

本文根据项目具体应用场景开发滑油系统仿真设计平台，在弯头组件数据库及参数化设计方面，仅考虑光滑管壁的标准弯头组件，暂不考虑折管类型的使用。

3.2.4 变径管压力损失模型

在船舶传动系统的强制润滑系统中，润滑油流经变径管道时，由于管径变化，流体速度发生变化，从而引起压力损失。为了准确评估该压力损失并优化润滑系统设计，需要建立变径管的压力损失数学模型。变径管在工作状态时所产生的压力损失属于局部阻力损失，因此其局部阻力损失数学模型为式(3-3)所描述的数学模型，但其阻力系数有着变径管所特有的特性参数。本文所开发的仿真平台数据库建立扩大管和缩小管两种类型的变径管，而扩大管分为突然扩大和渐扩管。缩小管分为突然缩小和渐缩管。

当扩散角小于180°，流体流经扩大管时，变径管为其阻力系数与变径前后的内径比有关，如下图3.2所示：

图3.2 变径管扩径示意图

对于突然扩大的扩大管类型，其阻力系数值如式(3-6)：

 (3-14)

表3.4 不同管径比下突然扩大的变径管的阻力系数

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|     | 0.1 | 0.2 | 0.3 | 0.4 | 0.5 | 0.6 | 0.7 | 0.8 | 0.9 | 1.0 |
|     | 0.81 | 0.64 | 0.49 | 0.36 | 0.25 | 0.16 | 0.09 | 0.04 | 0.01 | 0   |

对于渐渐扩大的变径管类型，也称渐扩管，其阻力系数与扩散角度以及前后内径比有关，在工程中一般根据经验将二者统一考虑起来，主要根据内外径的比例来获取渐扩管的阻力系数，如下表3.4所示即为不同管径比下的阻力系数，注意此时所用的管径比为，便于取经验值。

表3.5 部分管径比下渐扩管的阻力系数

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|     | 1.1 | 1.2 | 1.3 | 1.4 | 1.5 | 1.6 | 1.7 | 1.8 | 1.9 | 2.0 |
|     | 0.05 | 0.10 | 0.15 | 0.20 | 0.24 | 0.27 | 0.31 | 0.34 | 0.36 | 0.38 |

对于变径管当扩散角小于180°，流体流经扩大管时，变径管为其阻力系数与变径前后的内径比有关，如下图3.3所示：

图3.2 变径管缩径示意图

对于突然缩小的缩小管类型，其阻力系数值如式(3-7)：

 (3-15)

表3.6 不同管径比下突然缩小的变径管的阻力系数

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|     | 0.1 | 0.2 | 0.3 | 0.4 | 0.5 | 0.6 | 0.7 | 0.8 | 0.9 | 1.0 |
|     | 0.41 | 0.32 | 0.23 | 0.18 | 0.13 | 0.08 | 0.05 | 0.02 | 0.01 | 0   |

对于渐渐缩小的变径管类型，也称渐扩管，其阻力系数与扩散角度以及前后内径比有关，在工程中一般根据经验将二者统一考虑起来，主要根据内外径的比例来获取渐缩管的阻力系数，如下表3.7所示即为不同管径比下的阻力系数，注意此时所用的管径比为，便于取经验值。

表3.7 部分管径比下渐缩管的阻力系数

|     |     |     |     |     |     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|     | 1.1 | 1.2 | 1.3 | 1.4 | 1.5 | 1.6 | 1.7 | 1.8 | 1.9 | 2.0 |
|     | 0.06 | 0.10 | 0.15 | 0.22 | 0.31 | 0.36 | 0.42 | 0.49 | 0.57 | 0.7 |

3.2.5 三通管压力损失与流量分配模型

在强制润滑系统的管路网络中，三通管是常见的局部阻力元件，其功能是实现流体的分流或合流。润滑油流经多通管时，由于流动方向突变和速度重新分布，会产生显著的局部阻力损失。本节将针对多通管的几何特性与流动状态，建立三通管压力损失数学模型。常见的三通管类型包括T型三通和Y型三通以及侧支三通管类型。三通管的压力损失模型基于局部阻力损失计算，根据式(3-3)计算可得。

计算三通管的压力损失需要计算出三通管的阻力系数，能够影响三通管阻力系数的包括，支管与主管的管径比，支管与主管的夹角以及流动模式的影响。下面本节根据三通管的工作工况和三通管的具体类型来确定三通管的阻力系数值。对于三通管，常见的工况类型主要分为合流和分流两种状态，下面本节将在两种状态下分别确定三通管阻力系数值。

在合流工况下，0流体从支管流入主管，根据管径是否一致以及三通管类型，当主支路管径一致时，以主路流速作为参考标准，阻力系数如下表所示：

表3.8 合流状态下等径三通管阻力系数

|     |     |     |
| --- | --- | --- |
| 等径T型三通管 | 等径Y型三通管 | 等径侧支三通管 |
| \=1.8 | \=1.2 | \=0.9 |

当主支路管径不一致时需引入管径比作修正，并基于等径三通管的阻力系数，修正公式为：

 (3-16)

通过计算合流工况下不同类型的三通管的阻力系数得以求解管路系统工作时，三通管管件所产生的局部阻力损失。

在分流工况下，流体从主管流入支管，由单路管道变为双路管道，此时整个三通管管件的局部阻力损失在三通管件内部分为三个部分，主管剩余段部分，两个支管部分。分流状态下一般采用等径三通，在此本文针对分流状态只考虑等径三通。主路局部阻力损失以主路流速作为参考标准计算，支路局部阻力损失以支路流速作为参考标准计算，阻力系数如下表所示：

表3.9 分流状态下等径三通管阻力系数

|     |     |     |     |
| --- | --- | --- | --- |
| 管路类型 | 等径T型三通管 | 等径Y型三通管 | 等径侧支三通管 |
| 主路  | 0.5 | 0.8 | 0.5 |
| 主支路 | 1.3 | 0.3 | 0.5 |
| 支路  | 1.3 | 0.3 | 1.5 |

在滑油系统管路网络中，三通管作为负责分流合流的主要工具，其准确性直接决定了流量分配的合理性以及设备运行的可靠性。通过理论研究和数值仿真的方式，精细推算三通管的流动特性。精准的三通管压力损失模型可以为滑油管路网络仿真计算平台的仿真计算算法提供坚实的基础以及更高的稳定性。

3.2.6 阀门压力损失与流量分配模型

阀门是润滑系统中用于调节流量和控制压力的关键元件，其流体动力学特性表现出显著的非线性。与直管等线性元件不同，阀门的压力损失与流量之间的关系受阀门开度（OP）的动态影响。为了精确描述这一特性，本文采用国际通用的流量系数值法（基于ISA-75.01.01工业标准）建立阀门的数学模型。

根据标准流体方程，流经阀门的不可压缩流体流量Q与阀门前后的压差呈非线性关系，其基本控制方程为：

 (3-17)

其中：

- ：是通过阀门的精准体积流量(m³/s)。
- ：阀门的额定流量系数，定义为阀门全开状态下，温度为15.6℃的水在6.89压降下每分钟流过的美国加仑数。该参数由阀门制造商（如Fisher,Sampson等）在产品手册中给出。
- ：阀门上下游压差(Pa)。
- SG：流体比重，即润滑油密度相对于水密度的比重，无量纲。
- ：单位换算系数，当流量单位是m³/s，压力单位是时，取值通常为0.865。

为阀门特性函数，描述相对流量系数与开度(OP)的关系。根据阀芯结构的不同，本仿真平台支持两种典型的流量特性曲线模型：

线性特性（Linear Characteristic）：阀门的相对流量系数与开度成正比，适用于液位控制或流量变化较小的场合。

 (3-18)

等百分比特性（Equal Percentage Characteristic）：阀门在单位行程变化所引起的流量变化与此时的流量成正比。该特性在小开度时流量变化缓慢，大开度时变化迅速，调节性能优越，广泛应用于压力和流量波动较大的润滑管路系统。

 (3-19)

式中，R为阀门的可调比，通常取值为30~50。通过联立式1.1-1.3即可在给定开度和压差下，精确计算阀门的流量，或在已知流量下反解其产生的局部压力损失。

3.2.7 泵的压力-流量特性模型

在强制润滑系统中，油泵作为唯一的动力源，其本质是为流体提供压力能的“增压元件”，而非消耗能量的“损耗元件”。因此，建立泵的数学模型旨在描述其输出压力与输出流量之间的耦合关系（即P-Q特性曲线），这构成了系统仿真的压力边界条件。

对于船舶齿轮箱润滑系统中常用的容积式泵（如齿轮泵、螺杆泵）或离心泵，其扬程（或出口压力）会随着输出流量Q的增加而下降。根据流体机械原理及工程经验（如《泵手册》），这种非线性特性通常采用二次多项式进行拟合：

 (3-20)

其中：

- ：泵的出口压力，单位Pa；
- ：泵的入口压力（通常连接油箱，近似为大气压或油箱液位静压），单位Pa；s
- ：泵的实际输出流量，单位；
- a，b，c：泵特性曲线的拟合系数。这些系数通过对泵厂家提供的性能测试数据点（流量-扬程曲线）进行最小二乘法拟合获得。其中c物理意义为泵在零流量（关死点）下的最大理论扬程，a通常为负值，反映了压力随流量增加的衰减趋势。

3.3 润滑系统的数值求解办法

3.3.1 管路流导分析

本文所研究的仿真计算算法主要应用场景为船用齿轮传动装置强制润滑系统。在实际场景中，润滑管路设计图较为凌乱复杂，为了将润滑管路网络可视化在仿真设计平台，需要将滑油管路系统进行线性简化，便于建模和仿真。润滑管路网络系统由不同的管件和管道组成，为了研究压力、流量和物理原件之间的关系，将管路系统抽象为由节点与元件组成的网络系统。本文所采用的润滑系统数值求解基础算法参考基尔霍夫定律对管路系统进行建模，节点代表管路中物理元件的流入流出点，流体在管路系统中流动可以类比电流在电路中流动，管路原件两端的流体压力差类比做电压，管路原件的流导类比做电阻。参考电路工作的分析方法，润滑管路也可以分为串联管路以及并联管路，本节根据质 量流量守恒方程、连续性方程以及伯努利方程对三种类型管路进行分析。

本文所研究的船用齿轮传动装置强制润滑系统所使用润滑油液为不可压缩流体，因此在管路系统中，为了对管路系统进行简化，对一段流体流经的管路，有，，所以式(3-6)伯努利方程可以写为：

 (3-21)

经过对沿程阻力损失和局部阻力损失的分析，式(3-8)管路总阻力损失之和为：

 (3-22)

将式(1.2)代入式(1.1)可得：

 (3-23)

将式(3-7)代入化简可得：

 (3-24)

可令即这段管路两端的压力差，再次整理式(1.4)，将公式转化为流量和压力差的对因公式：

 (3-25)

这时可令，并对式(1.5)进行线性化分析，可以得到：

 (3-26)

式(1.6)中，可令，即为这段管路的流导。所截取的这一段管路两端的流量与压力的关系即为：

 (3-27)

此外，在实际的传动系统润滑管路系统中，管路的开关控制有着大量的阀门参与，因此可以将阀门的开关考虑进流导、压力和流量的关系之中。本文将阀门的开关进行线性取值，设定为K，取值范围\[0，1\]。当K值为0时，阀门全关闭，当K值为1时，阀门全开通。式(1.8)即为：

 (3-28)

对于流导的确定，在仿真过程中根据管路流量和流过这段管路产生的压力损失进行具体的计算才能获得，通过不断地调整流导的取值，最终整体的仿真计算值将会更符合实际数据。

在实际的船用齿轮传统系统的强制润滑管路系统研究中，经过拆解可以发现复杂的管路一般由串联管路、并联管路组成，研究华友管路系统的肢体数值仿真模型的首要工作就是计算在实际管路中，各个节点的阻力损失所等效的流导。下面对串并联的管路模型进行等效流导分析：

（1）串联管路流导分析

图 3.3 串联管路

如图1所示，将管路中的两个不同管件等效为两个流导，由公式(1.7)可知，，并且在串联管路中流量不变，，那么图1中串联管路整体压力差应为：

 (3-29)

这段管路所等效的流导为：

 (3-30)

（2）并联管路的流导

图 3.4 并联管路

并联管路中，主路流量为支路流量之和，的管路的流导推理如下：

 (3-31)

进行变式可得：

 (3-32)

根据可得并联管路的总流导为：

 (3-33)

3.3.2 节点压力计算法

节点压力计算法是一种基于线性流导假设的管网网络稳态仿真方法，其核心思想是将复杂的管路系统抽象为节点-支路拓扑结构，类比电路网络分析方法。基于质量守恒与能量守恒原理构建节点压力方程组，通过求解线性方程组计算节点压力分布。

对于管路网络中的每个节点，流入流出的流量需满足平衡关系：

 (3-34)

其中，为节点相连的支路集合，为节点到的流量，流入的流量为负，流出为正，为外部注入的流量（如泵流量）。

根据章节3.3管路流导分析，得到支路流量与支路两端节点压力差以及流导的线性关系式(1.7)。在一个完整的管路系统中，节点压力计算法正是基于此线性关系，将管路网络类比电路系统，由此可以得出对管路系统中各支路的支路流量与支路压力差呈线性关系：

 (3-35)

式中流导由每个管件的静态特性定义，例如直管流导，阀门流导为。

对于系统中的个节点，构建线性系统方程组：

 (3-36)

其中为流导矩阵，为节点压力向量，为流量向量。求解此线性方程组可求出个节点压力值。

本节将采用节点压力法对以“太平洋”轮管路系统中的艉轴滑油系统进行拆解计算，图4.1为艉轴滑油系统的节点管路图。其中类似P1的标识表示此处管路节点的压力。类似PF1的标识为外接的输油口的油压，在一般情况下其值为0。类似V24、VM21标识代表阀门或者过滤器的编号，这类型的元件需要两个变量进行控制，一个是自身流导以及控制阀门的状态值K。

图 3.5 艉轴滑油系统节点图

Fig.3.5 Node-Pressure Graph of Stern Tube Lubricating Oil System

以图3.5所示的艉轴滑油系统节点图为例所建立的节点压力计算方程如下：

 (3-37)

式1.17所描述的方程组经过整理之后可以得到以此艉轴滑油系统为例的求解节点压力的矩阵方程组形如：

 (3-38)

矩阵方程组左侧为系数矩阵以及待求解的节点压力矩阵，方程组右侧为常数矩阵。由此，求解艉轴滑油系统未知节点压力的问题就变成了线性矩阵方程组的求解问题。

3.3.3 有限体积法（FVM）

有限体积法（Finite Volume Method）也称控制体积法，其基本思路是将流体域划分为网格，并且定义每个网格节点周围有一个互不重复的控制体积（Control Volume），实现流体域的离散化，在每个控制体积内应用控制方程以及守恒定律，将守恒的控制方程在每个控制体积上做积分（积分时用到界面处未知量及其导数的插值计算公式，即离散下的格式）。得到离散后的关于节点未知量的代数方程组后，对方程组进行求解，即可得到计算节点的求解值。

使用有限体积法求解流体流动中的问题，大致可以分为三个步骤：

（1）在需要计算的流体域中生成计算网络，包括节点及其控制体积，生成网格主要以维度区分。这里列举一维和二维的网格划分方式，

如图4.2为一维问题的计算网络，在节点A和B之间的空间域上放置一系列节点，以P来标识每一个广义的计算节点，两侧节点分别用L和R标识，将控制体积的边界和取在P节点与两个节点中间的位置。这样每个节点都可以被控制体积所包围，对应的控制体积的两个边界界面也用同样字符，边界间距用标识，L至P的距离用标识，R至P的距离用标识。

图 3.6 一维计算网格

（2）对守恒型的控制方程在每个控制体积上做积分，积分时会用到未知的及其导数的插值计算公式，这种积分控制方程的方式可以得到此控制节点的离散方程。这里需要说明的是，对于任何一段连续的控制体积，无论是连续性方程、动量方程还是能量方程，都可以写成如下的通式1.20：

 (3-39)

式1.20可以称之为一维模型方程，方程中包含对流项、扩散项以及源项，变量相当于广义变量，可以代表流速、温度和浓度等物理量，是相应于的广义扩散系数，S是广义源项。在图4.2所示的控制体积上对式1.20进行积分：

 (3-40)

其中当作为控制体积的体积，当控制体很微小时，我们可以把它表示为，这里作为控制体积的界面面积，积分式可变化为：

 (3-41)

式中对流项和扩散项均已转化为控制体积界面上的值，有限体积法在求解过程中特点就是界面的物理量要通过插值的方式由节点的物理量来表示。为了建立需要的离散方程，我们需要找出控制体积界面和处的，但这些值是在控制体积中心的节点定义的，所以有限体积法为了找出界面处的这些物理量，采用中心差分的方式，定义了一个物理参数，这个参数在节点之间近似分布，通过线性近似的方式来计算并代表界面特性值，如下：

 (3-42)

同样原理，扩散项采用中心差分的线性插值结果是：

 (3-43)

 (3-44)

通过将式1.22中其他项也进行类似变化，最终整式在线性插值的变化下成为：

整理之后变为：

记作：

 (3-45)

可得到方程组：

 (3-46)

（3）得到离散方程组后，对离散方程组进行求解。为了求解整个流体域中的流动问题，必须对划定网格后定义的每个节点进行离散方程组的设立，即式1.28、1.29，通过对这些线性方程组进行求解，就可以得到物理量在各个节点处的值，从而求解出流体的流动情况。

3.3.4 基于公开数据的算法性能对比

但是，当前节点压力法所使用的矩阵方程组求解办法仍存在着一定的缺陷，包括三个方面如下：

（1）大规模系统的计算效率与收敛性问题（此三点需要参考文献）

在求解过程中系数矩阵为型矩阵，为节点个数，可是在滑油管路系统中，存在着相当数量的开关阀门件操作，这样实际上会有一部分管路或者节点流量为0，系数矩阵就有了稀疏矩阵的特征，含有大量的0数值。当稀疏矩阵存在时，使用计算机求解未知节点压力的矩阵方程组会造成运算效率低以及内存浪费的情况。

（2）管件特性线性假设的局限性

节点压力计算法基于管路线性流导模型来建立矩阵方程组，核心是假设管件流导为常数，由此管路压力与流量成线性关系。在实际计算过程中该假设极大程度上简化了计算流程，但在含有非线性元件的复杂系统当中，仍采用将管件的特性强行假设为固定值的方式在计算之后会造成与真实情况的显著偏差，以调节阀为例，其流导值随阀门开度的变化规律可以表述为：

 (3-47)

其中为阀门特性指数，由阀体结构决定（例如球阀，蝶阀），而在将阀门进行线性假设时（阀门特性指数），可能在阀门中低开度下产生20%的显著误差。类似的，三通管的流量分配比也存在非线性误差，不能简单地通过压差比进行线性调节。这类非线性元件在线性框架下求解容易导致计算结果上流量分配不准，局部压力损失计算偏差累计过大等问题，造成整体上的计算误差或自研仿真平台精准度问题。

（3）鲁棒性缺陷与实用性限制

节点压力计算法基于单向流导模型，默认流体从高压节点流向低压节点。然而在实际运行中支路的压力差可能会因为负载的变化或者回流工况发生反转，这种情况在实际管路中有着一定的发生概率，由于节点压力计算算法无法动态判断以及切换流向，只依赖预设逻辑可能会导致质量守恒方程失衡以及支路流量计算错误等情况。

在实际对管路系统采用节点压力计算算法进行测算时，如果管路中存在孤立节点、错误拓扑或者边界条件冲突（例如泵出口固定压力）时，系统矩阵可能会出现秩亏即的情况导致求解失败，也称病态系统矩阵，最终导致无法收敛，计算中断或失败。

有限体积法（FVM）在处理复杂流动问题中据由守恒性强、适用范围广等优点，但在用于管路系统（如润滑、液压或者工业输送）仿真中，仍存在以下两个主要的局限性

（1）计算效率低，非线性适应性差。有限体积法需要对计算域进行空间离散，系统规模大时，构建和求解控制方程过程计算代价显著上升。为提高精度需加密网格，进一步加重运算负担；同时，非线性问题求解中迭代次数多、收敛速度慢，难以满足实时仿真或快速设计的要求。在瞬态强非线性场景（如水锤波、压力冲击）下，有限体积法需使用Riemann解算器、斜率限幅器等手段抑制震荡。若处理不当，容易产生非物理振荡或数值耗散，影响模拟稳定性与可靠性。

（2）边界条件处理复杂，几何建模要求高。管路系统常包含泵、阀、交汇节点等复杂边界。FVM对边界类型敏感，在处理已知通量与动态压力之间切换时需引入判断逻辑与额外迭代，导致建模复杂、不利于平台化集成。FVM依赖高质量网格来保障计算精度，面对接头、弯管等不规则结构时建模负担重。若网格划分不合理（如扭曲、非正交），将直接影响解的精度与收敛性，不利于在工程中推广应用。

3.4 本章小结

本章系统构建了船舶齿轮传动装置强制润滑系统的流体动力学数学模型，基于质量守恒方程、伯努利方程及水头损失计算理论，建立了涵盖直管、弯头、变径管、三通管等关键元件的压力损失模型，并引入阀门开度参数与泵特性曲线量化动态调节过程。通过流导等效法将复杂管路网络简化为节点压力矩阵方程，结合基尔霍夫定律类比电路模型提出高效数值求解策略，为后续分层自适应混合迭代算法（LAHI）的开发奠定理论基础，同时支撑了参数化元件数据库的构建，显著提升仿真精度与工程实用性。

第4章 润滑系统仿真计算算法研究

针对传统数值方法在复杂船舶润滑系统仿真中面临的收敛性差、计算效率低等瓶颈问题，本章基于第三章建立的管件流体动力学模型与管网拓扑理论，提出分层自适应混合迭代算法（LAHI）。通过将管路网络按非线性强度分层处理，结合稀疏矩阵优化、动态耦合修正与容错机制设计，突破大规模非线性方程组求解的技术障碍。在保持管网拓扑完整性的前提下，根据元件的非线性强度对计算过程进行“数学分层”，对线性主导部分采用高效的稀疏矩阵技术，对强非线性部分进行局部精细化迭代，并通过动态耦合策略实现整体收敛。算法在保证精度的同时提高计算效率，并成功集成至自主仿真软件，实现从理论模型到工业级求解器的跨越，为本文所研究的国产润滑系统设计仿真软件的开发提供核心算法支撑。

4.1 LAHI分层自适应混合迭代法设计

4.1.1 基于非线性强度的计算分层策略

传统节点压力法将系统中所有元件简化为线性流导模型进行整体求解，虽计算高效，但在处理调节阀、三通等强非线性元件时精度受限。而全局Newton -Raphson法虽能处理非线性，但其计算复杂度随系统规模急剧增长，难以满足大规模工程应用的高效要求。为解决精度与效率之间的矛盾，本文借鉴了计算力学中“显式-隐式”混合积分\[X1\]及化工过程仿真中“方程定向分割”\[X2\] 的思想，提出了一种基于非线性特性的计算分层策略。该策略的核心在于依据元件流体动力学特性的本质差异，将全局非线性求解问题在数学层面进行分解，而非物理分割网络。

首先需要对元件的非线性行为进行量化评估，这是实现计算分层策略的基础。基于第三章建立的元件精确数学模型，本文定义一个元件的非线性强度指标​，用以表征其流量-压差关系对节点压力变化的敏感度。该指标的本质是局部雅可比矩阵随状态变量的变化率，这与非线性有限元分析中判断材料或几何非线性的思想一脉相承\[X3\]。

式中，表示Frobenius范数。依据与设定阈值的比较，将元件划分为两类：

线性元件 (<)：主要包括直管、弯头及固定开度的阀门等。其动力学行为可由常数流导矩阵高效表征，构成系统的主体骨架。

非线性元件(\>)：主要包括调节阀（其流导为开度的非线性函数）、三通（流量分配行为强烈依赖于支路压力比）及泵（具有非线性特性曲线）等。这类元件是系统非线性和迭代收敛困难的主要来源。

随后，在数学层面进行计算任务解耦。如图4.1所示，本策略将计算任务划分为线性子网与非线性子网两层两个层次。例如，在图3.6中的艉轴滑油系统中，类似V24、VM21的阀门需要两个变量（流导和开度K）控制，其行为明显非线性，因而被划入非线性层；而普通管道和定流导阀件则视作线性层处理。实现上，先构建网络的节点-支路拓扑图，将所有非线性元件对应的支路从网络中“切割”出来，剩余节点与支路形成一个（或多个）连通的线性子网络。此划分可通过图搜索算法或连接性分析实现，使得线性层和非线性层在拓扑上相互耦合但可分别求解。

在完成分层后，需要建立两层之间的接口信息交换机制，以保证整体网络的求解精度与收敛性。非线性层的元件在初始迭代中会依据上一轮的节点压力估计值，计算其等效流导并将该值传递给线性层；线性层则利用这些等效流导求解更新后的节点压力，再将结果反馈给非线性层进行下一轮的非线性修正。通过这种分层迭代方式，可避免在整个网络范围内一次性求解大规模的非线性方程组，从而有效降低计算规模与求解难度。同时，这种策略也为后续的稀疏矩阵优化、动态耦合修正等技术奠定了基础。

图 4.1 网络分层策略图

4.1.2 线性子网求解办法

LAHI算法的效率优势，源于其将原复杂非线性系统的求解问题，转化为一系列具有不变系统矩阵的大规模线性方程组的迭代求解过程。线性层正是承担了这一核心计算任务，其高效性通过以下三个层面得以实现：稀疏矩阵技术、系数矩阵恒定特性、以及稳定高效的求解算法。该层的全局系统方程组可以表示为：

其中为全局节点的流导矩阵，其元素反映了节点间的连接关系和流导特性；为所有未知节点压力构成的待求解向量；为包含了一致的流量信息。

流导矩阵具有稀疏性和恒定性两个特性，这是实现高效求解全局系统方程组的关键所在。稀疏性指管网系统的拓扑结构通畅呈枝状或者弱环状，这意味着每个节点相连的节点是有限制的，这种情况导致流导矩阵中就绝大多数元素是零，矩阵就变为一个大型的稀疏矩阵，利用稀疏矩阵存储技术，可以节省内存占用，从而提高计算效率。恒定性是指流导矩阵的元素由元件的流导决定，线性元件的流导为常数，而对于非线性元件，在LAHI框架之下，可赋予非线性元件一个等效线性流导，这样不论求解过程中迭代次数如何变化，矩阵的结构和纬度始终不会变化。

线性层的作用是提供一个稳定且统一的计算平台，非线性元件在物理上并未从网络中剥离，始终是全局系统方程组的一部分。线性层通过容纳非线性元件并将其等效成为线性化，构建了一个能够近似描述整个系统的全局模型。这个全局模型是LAHI算法进行迭代求解的基础。每一次迭代，非线性元件会向线性层提供更新的等效流导，线性层则负责快速解算由此构成的新的全局方程，从而推动整个系统向真解收敛。如何利用此框架进行迭代，以及非线性元件如何进行局部计算与更新，将在4.1.3中进行讨论。

4.1.3 非线性元件局部计算与全局迭代机制

在LAHI算法中，非线性元件并未被孤立处理，而是作为内嵌于全局线性框架中的“活跃单元”。其核心思想是在全局线性框架提供的压力场下，非线性元件进行独立的、更高精度的局部计算，并将结果反馈至全局框架，通过迭代实现整体收敛。本节将详细阐述这一动态过程。

在每一次全局迭代中，当线性求解方程（1.31）得到一个管路网络节点压力估计值组时，每个非线性元件将在此压力场下进行自我审查，以调节阀为例，其复杂的非线性数学模型为：

其中为通过阀门的流量，是阀门的额定流量系数，为阀门开度的特性函数，压力差，流体密度等）。

在每次迭代中非线性元件将根据当前迭代的上下游节点压力以及自身的非线性数学模型计算通过自身的真实流量。将计算得到的所有元件的精准流量值代入到每一个节点的流量平衡方程中，计算其残差（净流入流量）。若所有节点的残差绝对值都小于设定的收敛容差，则表明当前的节点压力估值组能够使所有非线性元件元件的真实非线性流动达到系统平衡，算法成功收敛。当满足收敛特性时，输出此次迭代所使用的节点压力值组作为最优解。

若不满足收敛要求，则使用此次的真实流量值进行新的等效“线性流导”的计算，将该非线性元件在此工作点附近等效为一个“线性电阻”，其新等效流导的计算公式为：

此等效流导是一个临时的、与当前迭代相关的值。它的物理意义是：在该特定工作点下，用一个流导值为的线性元件去替代非线性阀门，其计算出的流量与用精确模型(1-32)计算出的结果完全相同。这一步完成了对非线性流导值的等效流导更新，这正是LAHI算法实现非线性元件“嵌入式”线性化的关键步骤。通过新的等效流导值进行下一次节点压力估计值组的求解，并重复真实流量的求解，以及收敛性验证的步骤。

LAHI算法的迭代过程是一个不断自我修正的预测-校正过程。关键在于每一次迭代都使用真实物理模型来计算精准流量，并以此作为校验系统是否收敛的绝对标准，从而确保最终解在物理上的精确性。等效流导只是一个引导算法逼近真解的临时变量。

4.2 算法收敛性和鲁棒性增强机制

4.2.1 全局残差监控与收敛依据

在LAHI算法的分层迭代框架中，线性求解器虽然能快速给出全网节点的压力预估值，但该结果是基于线性化等效流导计算所得，未必满足流体动力学的非线性物理约束。为确保仿真结果的物理真实性，本节设计了基于质量守恒定律的全局残差监控机制，将其作为算法迭代进程中唯一的“真实性校验标准”。

全局残差监控机制遵循“线性驱动求解，物理把控收敛”的基本原则。算法的迭代进程由高效的线性求解器主导，但收敛性的最终裁决严格依赖于所有元器件在精确物理模型下的行为。具体而言，在每一轮迭代获得节点压力估算值 后，算法即刻启动全系统的本地精确计算流程，依据当前压力分布求解各节点的真实物理流量。这一环节旨在剥离线性近似引入的误差，为后续构建质量不平衡残差提供可信的数据基础，从而确保最终输出的仿真结果严格遵循流体网络的物理守恒定律。算法调用第三章建立的高保真元件模型库，计算当前压力场下的真实流量。

在获得所有元器件（包括线性与非线性）的精准流量值后，算法将这些值代入到仿真网络的每一个节点中，依据质量守恒定律（式3-1）计算每一个节点的净流量残差：

其中，和分别表示流入和流出节点的元件集合。

算法的收敛性由上述所有节点的残差共同决定。我们采用无穷范数（Infinity Norm）作为系统的收敛判据，即检查所有节点中绝对值最大的那个残差是否小于预设的收敛容差：

若计算得出的无穷范数小于收敛容差则收敛，终止迭代，并输出当前的压力场和所有元器件的精准流量作为最终解。此解严格满足系统的质量守恒。

若大于收敛容差则不收敛，进入等效流导更新阶段，利用本次计算得到的，为每个非线性元件计算新的等效流导，为下一次计算新一轮所需要的节点压力估计组做准备，并开始下一次全局迭代。

此项技术是LAHI算法精度与可靠性的根本保证。它通过在迭代环中强制的“物理真实性校验”，确保了算法最终输出的是基于精确物理模型的、满足守恒律的解，而非线性近似下的数学解。

4.2.2 稀疏线性系统高效存储与求解技术

LAHI算法的核心是将非线性流体网络问题转化为线性方程组的反复求解过程。该方程组的维数N等于网络中节点总数，对于船舶润滑系统，N可达数百个，这导致系数矩阵B的维度巨大，但是受限于管路拓扑的物理连接特性，该矩阵呈现出显著的稀疏性。针对这一数学特征，本节采用稀疏存储与预处理迭代相结合的策略，从内存占用与计算速度两个维度实现求解效率的突破。

（1）基于CSR格式的压缩存储

稀疏矩阵存储格式直接使用二维数组存储N×N矩阵会浪费巨量内存且计算效率低下。仿真引擎底层可以采用压缩行存储（Compressed Sparse Row, CSR）格式。该格式仅存储矩阵中的非零元素及其列索引与行偏移量，降低内存消耗。CSR格式在内存中连续存储非零元，极大地提升了CPU缓存命中率，使得核心算子——稀疏矩阵向量乘法的运算效率显著优于链表等离散结构。在LAHI算法的每一轮迭代中，虽然元件的等效流导值不断更新，但矩阵的非零元位置（即管网拓扑结构）保持不变。基于此特性，本算法实现了拓扑结构固化，数值更新的快速组装机制，仅需更新CSR结构中的values（非零值）数组，避免了重复的内存分配与索引构建开销。

（1）迭代求解器的选型与结构复用优化

由于润滑管网中包含单向阀、泵等具有方向性的元件，导致的节点流导矩阵通常是非对称的。传统的共轭梯度法求解矩阵仅适用于对称正定矩阵，在此无法直接应用。而直接解法（如LU分解）在处理大规模稀疏矩阵时，会产生严重的“填充元”现象，也就是原矩阵中的零元素在分解过程中变为非零元，导致内存溢出。

因此，本文选用双共轭梯度稳定法（Bi-CGSTAB）作为核心求解器。相比于其他方法，Bi-CGSTAB无需存储大量的正交基向量，内存需求更低，其收敛曲线更为平滑稳定，适合处理此类刚性较强的流体网络方程。同时，引入ILU（不完全LU分解）作为预处理技术，其核心思想是在迭代求解前，构造一个原矩阵的近似逆矩阵对线性方程组进行变换。ILU分解在保留矩阵稀疏结构（即丢弃分解过程中产生的小数值填充元）的前提下，能够以极小的计算代价大幅改善矩阵的光谱特性，使特征值分布更加集中。这一预处理步骤相当于在数学上对‘病态’的方程组进行了修改，使其变得更容易求解，从而显著减少了Bi-CGSTAB所需的迭代步数，确保算法在复杂工况下依然能够快速、稳定地收敛。以改善矩阵的条件数，进一步加快收敛速度。

LAHI算法的一个巨大优势在于：尽管每次迭代矩阵A的元素值会变，但其稀疏结构（非零元的位置）由固定网络拓扑决定，始终不变。因此，预条件子所需的符号分析、分解结构等最耗时的准备工作，只需在算法开始时完成一次。后续所有迭代中，均可复用此结构，仅需进行快速的数值更新。这一策略避免了重复性开销，是保障LAHI算法高效性的关键所在。

4.2.3 非线性迭代的动态松弛与更新策略

在LAHI算法的迭代过程中，非线性元件的等效流导更新是连接物理层与线性求解层的关键环节。然而，由于调节阀、溢流阀等元件的压力-流量特性曲线往往具有极高的斜率（即高增益特性），微小的压力波动可能导致计算出的流量及流导值发生剧烈变化。若直接采用当前步计算出的理想流导值进行更新，极易引发数值震荡，导致算法无法收敛。

（1）基于欠松弛的更新机制

为了抑制迭代过程中的数值剧变，算法放弃了激进的直接更新方式，转而采用加权平滑策略。定义第k次迭代中，某非线性元件根据真实物理流量和压差计算出的目标流导为：

在更新下一轮迭代所需的等效流导时，引入松弛因子ω，取值范围为\[0,1\]，按如下公式进行混合更新：

其中，是上一轮迭代使用的流导值

此公式意味着新的流导值由“历史值”和“当前计算值”加权而成。ω<1时也就是欠松弛，更新后的流导值变化幅度被强制缩小，从而起到了“数值阻尼”的作用，有效过滤了迭代过程中的高频震荡噪声。

（2）松弛因子的自适应调节策略

松弛因子ω的取值直接决定了算法的收敛性能：ω过小会导致收敛速度过慢，ω过大则容易引发震荡。为了在“稳定性”与“收敛速度”之间取得平衡，本文设计了基于全局残差趋势的自适应调节策略（Adaptive Adjustment Strategy）。算法根据4.2.1节计算的全局最大残差的变化趋势，动态调整ω的值：

1.  策略一：残差下降阶段（收敛加速）

若检测到<，表明当前迭代方向正确且系统趋于稳定。此时，算法将逐步增大ω（上限为 1.0），以允许更大的更新步长，从而加速逼近真解。

1.  策略二：残差上升或震荡阶段（震荡抑制）

若检测到残差增大或在数值间反复跳动，表明当前步长过大导致了过冲。此时，算法立即触发抑制机制，显著减小ω（例如降至0.2~0.5），强制减缓流导的变化速率，优先确保系统回到稳定的收敛轨道。

1.  策略三：收敛锁定阶段

当全局残差低于预设容差时，算法将ω强制设为1.0并执行最后一次一致性更新，确保最终输出的流导值与物理模型完全吻合，消除松弛带来的残余偏差。

通过这种“遇阻减速，顺畅加速”的动态策略，LAHI算法能够自动适应不同刚性的管网工况，在保证鲁棒性的前提下实现了计算效率的最大化。

4.2.4 算法鲁棒性与容错增强

在实际工程应用中，润滑管网可能面临启动瞬间的压力冲击、管路堵塞或参数设置错误等极端工况。这些情况往往导致数值计算过程出现“非物理”解（如绝对负压）或矩阵奇异（Singularity），从而导致仿真中断。为了提升软件的工程适用性，LAHI算法内置了一套物理容错机制，从物理合理性校验和数值稳定性修正两个维度增强算法的鲁棒性。

（1）负压截止与预警机制

在线性方程组的纯数学求解过程中，可能会计算出低于绝对零压的节点压力值。这在物理上意味着流体发生了气蚀（Cavitation）或断流，若直接将此负压值带入后续计算过程中的开方运算内，将导致复数错误的产生，中断计算流程。针对此问题，本文设计了负压截止（Negative Pressure Cut-off）策略：在每一轮线性求解结束后，算法立即对全网压力场进行遍历扫描。

判据：若某节点i的绝对压力（润滑油饱和蒸汽压，通常接近 0 Pa），则判定该节点发生气蚀风险。

修正：强制将该节点的压力值“钳位”在饱和蒸汽压临界值（$P_i \\leftarrow P_{vapor}$），并记录该异常状态。

反馈：系统在日志模块中输出错误代码及异常节点ID（例如：“Error: Cavitation detected at Node #12”），提示用户检查该节点的上游供油不足或下游吸力过大等问题。这一机制有效防止了错误在迭代中扩散，避免了无效计算资源的浪费。

（2）逆向流动的自适应处理

润滑系统中广泛存在具有方向性的元件（如单向阀、泵）。在迭代初期或特定波动工况下，计算压差可能会出现与元件允许流向相反的情况。若不加以处理，常规的线性化模型将得出错误的“反向大流量”。LAHI算法对此类元件引入了流向条件逻辑，在非线性物理计算层，算法首先检测压差的符号。

对于单向阀：若<0（反向压差），则立即切换物理模型，将其视为一个阻抗极大的截止元件（流导≈0）。此机制确保了单向阀在仿真中能正确截止反向流动，符合其物理特性。

对于普通管路，为了保证数学上的连续性，防止<0时开平方报错，算法采用符号函数处理流量公式：

该处理确保了在发生回流时，算法仍能连续计算并反映真实的流动方向，而不会因数值错误而中断。

本节所述的鲁棒性保障策略是LAHI算法从理论走向工程应用的保障。物理合理性校验确保了迭代过程在物理上可信，而收敛性保障与诊断机制则确保了算法在数值上稳健且易于调试。两者共同作用，显著提升了算法处理复杂工程问题的成功率和实用性。

4.3 LAHI算法性能验证与对比分析

本为全面评估分层自适应混合迭代算法（LAHI）在数值求解层面的收敛性、精度与效率，本节在MATLAB R2023a环境下搭建了纯数值测试平台。不依赖具体的软件实现，仅针对数学模型进行算法级的对比测试。所有对比测试均在配置为Intel Core i5-12400F处理器、16GB RAM的计算机上完成。测试选取了两种在该领域最具代表性的基准算法与LAHI进行对比测试：

①普通节点压力法(Standard NPF)：代表基础线性算法，用于验证引入非线性迭代的必要性。

②通用非线性求解器 (Newton-Raphson / MATLAB fsolve)：代表数学标准解法，用于验证 LAHI 算法在工程应用中的高效性与稳定性。

4.3.1 测试案例设计

为了全面考察算法在不同维度下的性能，并隔离软件开发中的非算法因素（如界面渲染耗时），本文在MATLAB环境下构建了三个由简入繁的数值测试算例。所有算例均采用ISO VG320齿轮油作为工作介质，其物理属性设定为：密度，动力粘度。

（1）案例A：基准验证模型

该模型用于验证LAHI算法核心代码的数学正确性。模型结构设计为简单的“单泵-单阀-直管”串联系统，因其拓扑简单，可通过流体力学公式手动计算解析解，作为绝对精度的校验基准。

①拓扑结构：节点数N=4，包含1个压力源、1个流量控制阀及2段直管。

②边界条件：入口：恒流源；出口：大气压力边界。

③关键元件参数：调节阀(V1)：采用线性流量特性，额定流量系数，设定开度；输油管(L1)：长度10m，内径40mm，绝对粗糙度0.045mm。

④测试目标：将MATLAB脚本计算出的节点压力向量P与理论解析解进行比对，验证稀疏矩阵组装与物理流量重构模块的准确性。

（2）案例B：典型工程模型

该模型提取自本文3.3.2节图3.5所示的“艉轴滑油系统”。为了专注于流体网络求解算法的效率测试，对原始物理系统进行了拓扑简化。

①拓扑结构：节点数N=18，包含环路：系统包含主供油路与重力油箱溢流回路构成的并联网络。

②边界条件：高位重力油箱，设定静压头为15m(P≈135kPa)。主润滑泵，设定输出流量。

③关键元件参数：主输油管模拟从泵到艉轴的干管，DN65，长20m；前/后密封支路：模拟图3.5中通往FWD Seal和Aft Seal的分支管，DN25，长5m；三通节点：保留3个关键三通，用于模拟油液从主路分配至密封环的过程。调节阀：模拟图3.5回油路上的关键阀门，初始开度设为100%。

④测试目标：验证 LAHI 算法在处理具有典型“多分支、含环路”特征的工程管网时，相比通用数学求解器的计算效率优势。

（2）案例C：刚性阀控节流模型

在案例B的拓扑基础上，模拟工程中常见的阀门大压降工况。

①将案例B中位于回油管路末端的调节阀的开度从100%阶跃调整至1%。

②此工况模拟了“系统保压”或“流量极低”的状态。此时，阀门处的局部阻力系数急剧升高，导致阀前（系统侧）压力高企，而阀后（油箱侧）压力接近为零。。

③这种巨大的压力梯度导致系统流导矩阵中的元素数值差异极大（刚性显著增强），常规算法极易因此产生数值震荡。

④测试目标：检验 LAHI 算法中的“自适应松弛策略”在处理此类病态矩阵时的收敛稳定性。

4.3.2 收敛性与计算效率对比分析

基于构建的三个案例数学测试模型，本文分别从计算精度、运行效率及刚性工况下的稳定性三个维度，对LAHI算法、传统节点压力法（NPF）及通用非线性求解器（Newton-Raphson/MATLAB fsolve）进行了系统性对比测试。

（1）计算精度验证：非线性迭代的必要性

针对案例A，利用Matlab分别使用本文提出的LAHI算法与传统节点压力法（NPF）进行案例A进行数值求解。由于NPF方法采用假设固定流导，其计算过程中不进行残差校验，而LAHI算法通过物理流量重构机制，在迭代过程中不断修正元件参数。图4-5展示了LAHI 算法在迭代过程中的残差收敛曲线，表4-X记录了两种算法最终的节点压力计算结果。

图 4-2 LAHI 算法的残差收敛图

表 4-2 案例A节点压力计算结果对比

|     |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- |
| **算法名称** | **迭代步数** | **节点1压力(Bar)** | **节点2压力(Bar)** | **最终质量残差(kg/s)** | **相对LAHI误差** |
| 传统NPF | 1   | 0.0367 | 0.0251 |     | 94.20% |
| LAHI算法 | 74  | 0.6368 | 0.6366 | 5.14×10−7 |     |

从表 4-X 的数据可以清晰地观察到两种算法在计算精度上的巨大差异：传统节点压力法基于线性化假设，通常选取某一额定工况（如1Bar压差）下的流导作为全局固定参数。然而，在实际计算中，系统的真实工作点（约0.63Bar）与预设参考点存在显著偏差。由于阀门和管道的湍流特性，其等效流导随工况变化是非线性的。NPF忽略了这一变化，导致计算出的节点1压力仅为0.0367Bar，与真实物理工况严重背离，相对误差高达94.2%。这表明，在工况未知的润滑系统仿真中，单纯的线性求解方法完全不具备可用性。

相比之下，LAHI算法从初始的线性估计出发（迭代初期残差高达4.62×10<sup>5</sup>），通过分层迭代机制不断修正非线性元件的等效流导。由迭代日志以及图片4-2可知，算法在经历了初期的快速调整后，残差呈现波动下降趋势。虽然在第4-6步由于参数修正幅度较大出现了短暂的残差反弹，但得益于算法内在的收敛机制，残差随后稳步下降。最终在第74步，全局质量残差收敛至5.14×10<sup>\-7</sup>，满足了10<sup>\-6</sup>的高精度容差要求。

数据实测证明，对于包含阀门等非线性元件的管网系统，必须引入非线性迭代修正机制。LAHI算法能够有效克服线性化假设带来的原理性误差，精准计算出满足物理守恒定律的稳态解，确保仿真结果的可信度。

（2）计算效率对比：稀疏求解的工程优势

针对案例B（典型艉轴系统工程模型，节点数N=24），在相同的硬件环境与收敛精度标准10<sup>\-6</sup>）下，分别测试了通用非线性求解器（MATLAB fsolve）与本文提出的LAHI算法的计算性能。测试过程重复运行10次以消除系统随机误差，以消除操作系统调度带来的随机干扰，取算术平均值作为最终评测数据。图 4-X 直观展示了两种算法的计算耗时对比。

图 4-2 型工程工况下算法计算效率对比

实测数据表明，LAHI算法在计算效率上呈现出显著优势，其平均耗时仅为0.56ms，相比通用求解器的4.55ms 提升了约7.15倍。这一性能差距主要源于以下迭代路径的优化和稀疏计算方法的使用。

（2）鲁棒性对比：刚性工况下的稳定性

为了验证算法在极端工程工况下的鲁棒性，本文设计了案例C。在该模型中，将回油路调节阀的开度强制设定为1%。在1%微小开度下，阀门处的局部流阻系数急剧增大，导致系统流导矩阵的条件数显著恶化。极微小的流量变化会引起巨大的压力波动。常规算法在计算雅可比矩阵或更新流导时，极易产生过冲现象，导致数值在真值附近大幅震荡，无法满足收敛精度要求。

图 4-X 展示了在该刚性工况下，常规无松弛算法（模拟标准 NPF/Picard 迭代）与LAHI算法的残差收敛历程对比。

图 4-6 收敛曲线对比

常规算法的表现如图所示，在迭代初期能够使残差下降，但当进入高梯度的刚性区域后，由于更新步长过大，残差开始在10<sup>\-2</sup>量级剧烈震荡。这种数值陷阱现象表明，单纯的线性化迭代在处理强非线性元件时缺乏稳定性，最终导致计算发散或超时。LAHI算法内置的自适应松弛机制在此工况下发挥了关键作用。当算法检测到残差出现震荡趋势时，自动触发欠松弛控制，将更新权重ω动态降低。虽然这使得单步收敛率有所降低，但有效引入了数值阻尼，强制平抑了压力更新的波动幅度。如图中蓝线所示，LAHI算法全过程保持了单调收敛趋势，最终在第45步左右成功穿过10<sup>\-6</sup>的收敛阈值。

对比测试表明，在涉及阀门启闭、管路堵塞等高刚性工况时，LAHI算法通过牺牲少量的迭代步数，换取了极高的数值稳定性。相比于常规算法的震荡失效，LAHI算法展现出了优秀的鲁棒性，能够确保工业仿真软件在任意极端参数设置下均能给出可靠的计算结果。

本节通过构建由简入繁的三个基准测试案例，从精度、效率与稳定性三个维度系统验证了LAHI算法的综合性能。对比分析表明，相较于传统节点压力法（NPF），LAHI算法通过非线性迭代修正有效克服了线性化假设带来的原理性误差，实现了对物理真值的精准逼近。相较于通用非线性求解器，该算法凭借稀疏矩阵技术与自适应松弛策略，不仅在典型工程工况下实现了约7.5倍的计算提速，更在阀门微小开度等极端刚性工况下成功抑制了数值震荡，验证了其兼具高计算效率与强工程鲁棒性，可以满足船舶润滑系统实时仿真与复杂工况求解的需求。

4.4 液压元件参数化模型库构建

4.4.1 润滑系统模型库组件类别

液压元件参数化模型库是仿真软件实现精准计算的基础，它为LAHI算法中各类元件的局部精确计算提供可靠的物理模型和特性参数。基于船舶齿轮传动装置强制润滑系统的典型构成与工作原理，本仿真平台构建的模型库将核心液压元件划分为四大类别，其整体构成如图4.3所示。该分类方式兼顾了元件的物理功能与数学模型特性，旨在全面覆盖系统仿真所需的关键组件。

图 4.3 模型库整体构成

基础连接与导向元件，包括直管、弯头与变径管，构成了润滑管路系统的核心骨架，主要负责连接系统、引导油液流向并产生基本的沿程与局部压力损失。这类元件的流体特性通常可由其几何参数（如直管的长度与内径、弯头的弯曲半径与角度、变径管的直径比与锥角）结合经验公式直接确定，非线性较弱，在LAHI算法中多被归入线性层进行处理。

流量分配与汇集元件以三通管为代表，负责润滑系统中油液的分流与合流。其工作特性强烈依赖于支路压力分布，具有显著的非线性特征，是LAHI算法中非线性层重点处理的对象。其精确模型需根据具体的合流或分流工况，结合主管与支管直径、支管夹角等关键参数，分别计算各支路的压力损失与复杂的流量分配关系。

流量与压力控制元件主要包括阀门和过滤器，用于主动调节系统的流量和压力，是系统动态仿真与控制的核心。此类元件表现出极强的非线性，其模型的准确性直接决定了仿真结果的可靠性。阀门的核心参数包括其类型、流量系数以及开度-流量特性曲线；过滤器则主要关注其流阻特性，如初始压降及压降随堵塞程度的变化曲线。它们是LAHI算法迭代中进行等效流导更新的关键组件。

动力元件油泵作为系统的动力源，其模型核心是表征出口压力与输出流量关系的性能曲线（P-Q曲线），在仿真中可作为非线性压力源这一边界条件。

4.4.2 模型库的数据结构与接口设计

模型库采用了层次化的数据结构与标准化的接口设计。其核心在于将每个元件实例抽象为一个独立的数据对象，该对象封装了三大类参数：几何参数、特性参数与工况参数。几何参数定义了元件的物理尺寸，如直管的长度与内径、弯头的弯曲半径等；特性参数描述了元件的固有属性，如阀门的额定流量系数（Cv值）或过滤器的初始压降；工况参数则反映了元件在具体仿真中的瞬时状态，如阀门的实时开度。这种分离设计确保了模型参数定义的清晰性与可维护性。

在数据存储层面，模型库采用关系型数据库与面向对象编程相结合的方式。数据库中为每类元件建立了对应的数据表，并通过唯一的元件标识符（ID）进行索引。在程序代码中，每一类元件都对应一个特定的类，该类不仅包含了上述参数作为属性，更重要的是封装了该元件专属的压力-流量计算模型。例如，Valve类会包含一个基于其开度和Cv值计算等效流导的方法，而Pump类则封装了根据其P-Q曲线查询出口压力的方法。

模型库与LAHI算法之间的交互通过一组标准化的应用程序编程接口实现。这些接口是连接通用元件模型与特定求解算法的桥梁。其核心接口是calculate_conductance方法，LAHI算法在每一次非线性迭代中都会调用此接口，传入当前迭代的流量或压降估计值，并从元件对象中获取更新后的等效流导值。对于控制元件如阀门，此接口会根据其非线性特性曲线进行动态计算；而对于基础元件如直管，其流导值通常是固定的。此外，模型库还提供了get_parameters和set_parameters等接口，用于实现仿真过程中元件参数的查询与动态修改，从而支持参数化研究与控制策略测试。

这种结构化的设计确保了模型库具备良好的可扩展性与易用性。当需要新增一种元件类型时，开发者只需按照既定规范创建新的数据表与对应的类，并实现标准的计算接口，即可无缝集成到现有仿真平台中，而无需修改LAHI算法的核心求解逻辑。这为模型库的未来扩展和维护提供了极大的便利，有力地支撑了仿真平台适应复杂多变的工程应用需求。

4.4.3 模型库的数据库结构和管理

参数化模型库的实现，其核心在于建立一个结构合理、易于维护的数据库，用以存储和管理各类液压元件的属性参数。为实现元件数据的规范化存储与高效检索，系统采用关系型数据库进行建模。其总体设计遵循了关系数据库的规范化原则，旨在消除冗余、确保数据一致性，并支持灵活扩展。核心思想是通过一个总表管理所有元件的基本身份信息，再通过关联的扩展表存储其特有的技术参数。

（一）基础元件类型表

定义一个基础表，用来注册模型库所支持的所有元件“类型”。这个表是元件的“元数据表”，确保了数据字典的统一，是整个模型库可扩展性的基础。

表 4.1 元件类型表结构

|     |     |     |     |
| --- | --- | --- | --- |
| **字段名** | **数据类型** | **约束** | **描述** |
| type_id | INT | PRIMARY KEY, AUTO_INCREMENT | 元件类型唯一标识符 |
| type_name | VARCHAR(50) | NOT NULL, UNIQUE | 元件类型名称（如：'直管', '球阀'） |
| category | VARCHAR(20) | NOT NULL | 元件大类（如：'管道', '阀件'） |
| description | TEXT | NULLABLE | 类型描述 |

当工程师新增一种“蝶阀”时，只需在此表中插入一条新记录即可，系统便能识别这种新类型。

（二）元件实例表

所有被实例化（即被用户实际拖入到管路图中使用）的元件，其最核心的身份信息都存储在这个主表中。该表是系统中所有具体元件的“实例管理器”或“注册中心”，每一条记录都代表一个独一无二的元件实例。它通过type_id字段与component_types表关联，明确了每个实例属于何种类型。

表 4.2 元件实例表

|     |     |     |     |
| --- | --- | --- | --- |
| **字段名** | **数据类型** | **约束** | **描述** |
| component_id | INT | PRIMARY KEY,<br><br>AUTO_INCREMENT | 元件实例唯一标识符 |
| component_name | VARCHAR(100) | NOT NULL | 元件实例名（如主泵） |
| type_id | INT | FOREIGN KEY | 关联元件类型 |
| model_number | VARCHAR(100) | NULLABLE | 型号  |

（三）具体元件参数表

由于不同类型元件的属性差异巨大（例如，管道有“长度”和“粗糙度”，而阀门有“流量系数”和“开度”），为避免单一表结构出现大量空字段，本设计采用了具体参数表的方式。即为每种元件类型创建独立的扩展表，这些表通过component_id与主表components进行一对一关联。下面列举工作过程中管道、阀门、泵参数表。

表 4.3 管道参数结构表

|     |     |     |     |
| --- | --- | --- | --- |
| **字段名** | **数据类型** | **约束** | **描述** |
| component_id | INT | PRIMARY KEY, FOREIGN KEY | 关联主表ID |
| length | FLOAT | NOT NULL | 管道长度 (m) |
| inner_diameter | FLOAT | NOT NULL | 内径 (m) |
| roughness | FLOAT | NOT NULL | 绝对粗糙度 (m) |
| material | VARCHAR(50) | NULLABLE | 材质  |

表 4.4 阀门参数结构表

|     |     |     |     |
| --- | --- | --- | --- |
| **字段名** | **数据类型** | **约束** | **描述** |
| component_id | INT | PRIMARY KEY, FOREIGN KEY | 关联主表ID |
| cv_value | FLOAT | NOT NULL | 额定流量系数 |
| flow_characteristic | ENUM(...) | NOT NULL | 流量特性 |
| initial_opening | FLOAT | DEFAULT 1.0 | 初始开度 (0-1) |

表 4.5 泵参数结构表

|     |     |     |     |
| --- | --- | --- | --- |
| **字段名** | **数据类型** | **约束** | **描述** |
| component_id | INT | PRIMARY KEY, FOREIGN KEY | 关联主表ID |
| rated_flow | FLOAT | NOT NULL | 额定流量 (m³/s) |
| rated_pressure | FLOAT | NOT NULL | 额定压头 (Pa) |
| performance_curve | JSON | NULLABLE | 存储P-Q性能曲线数据 |

在仿真计算开始时，系统首先根据设计者构建的管网拓扑，获取所有涉及的component_id。然后，通过SQL的JOIN查询，将components表与相应的具体参数表关联，即可一次性加载所有元件的完整参数集。例如，要获取一个阀门的全部信息，查询语句如下：

SELECT c.component_id, c.component_name, t.type_name, v.cv_value, v.flow_characteristic

FROM components c

JOIN component_types t ON c.type_id = t.type_id

JOIN valve_components v ON c.component_id = v.component_id

WHERE c.component_id = ?;

该数据库设计通过“总表+扩展表”的模式，为参数化模型库提供了坚实的数据基础。它不仅实现了数据的规范化管理，更通过清晰的表关系，支撑了仿真引擎对元件参数的高效、准确调用，是LAHI算法能够进行精确计算的关键保障。这种结构也便于未来扩展新的元件类型，只需创建新的扩展表并在基础元件类型表中注册即可，具有很好的灵活性。

4.5 滑油系统仿真平台集成与实现

4.5.1 仿真平台的总体架构

滑油系统设计仿真平台采用基于React的现代化Web应用架构，实现了前后端分离的设计模式。前端专注于用户交互和可视化呈现，后端负责核心仿真计算和数据处理，二者通过定义良好的API接口进行通信，软件的总体架构如图4.4所示，这种架构模式保证了系统的可扩展性、可维护性和跨平台兼容性。

系统前端采用React.js作为核心框架，基于函数式组件和Hooks构建组件化用户界面，利用Context API进行状态管理，配合CSS3和Flex布局实现响应式设计。后端选用Node.js或Python提供RESTful API服务，负责封装LAHI算法和数据库操作，使用MySQL/PostgreSQL存储元件参数和项目数据。前后端通过JSON格式的HTTP API进行通信，整体采用前后端分离架构，确保系统的可扩展性和跨平台兼容性。

选择React生态源于其成熟的组件化开发模式和丰富的工具链，能够高效构建复杂的交互界面。Web技术栈具备天然的跨平台特性，用户无需安装即可通过浏览器访问，极大降低了部署和维护成本。这种技术组合在保证功能完整性的同时，为未来的功能扩展和技术演进提供了坚实基础。

架构设计充分考虑了工程实用性和开发效率，前后端职责分离便于团队协作和独立部署。React的状态驱动机制确保界面响应的一致性，而后端的微服务化设计支持算法模块的灵活替换和升级。该技术选型平衡了性能、可维护性和开发成本，为液压系统仿真提供了稳定可靠的技术支撑。

图 4.4软件架构图

4.5.2 系统前端架构与使用界面介绍

系统采用基于React的组件化架构，将复杂界面拆分为功能明确、职责单一的独立组件。这种设计遵循单一职责原则，每个组件专注于特定功能模块的实现，通过清晰的接口进行数据交换和事件通信。组件间采用分层结构组织，形成从整体到局部的逻辑层次，确保系统具有良好的可维护性和扩展性。

（一）仿真平台主界面

双击程序图标运行程序，即刻启动程序，如图4.5即为程序主界面。

图 4.5 系统主界面

如图2，系统主界面主要包括：菜单栏含有打开、保存、压力计算三大按钮实现相对应的功能；；左侧顶部操作面板；左侧上部管路结构目录展示管路结构的具体信息、左侧下部分为详细信息展示选定管件的具体参数信息；右侧上部分为管路结构设计与展示区域；右侧下部分为计算结果展示区域展示压力计算的结果以及日志输出区域展示运行状态与报错等。

（二）结构展示窗口

结构展示窗口指右侧网格区域，此区域以2.5D形式的网格画板进行管路结构的绘制与展示，可通过鼠标滑轮进行放大缩小，通过按钮区域的按钮实现设计操作功能。如图4.6所示为管路结构在窗口中展示的示例：

图 4.6 结构展示窗口

图 4.7 操作方法展示

左侧上方组件区是软件的主要设计工具区域，用户可以从中选择不同的管路组件，如油泵、三通管等，并选择他们然后在画布上设置。这个区域提供了所有设计所需的基础组件，可以满足管路结构的基本设置。对于结构中关键的详细参数，在绘制区域用户可以通过双击节点操作根据实际需求对管件的参数进行详细设置，对特别的管件进行选取。打开软件即可开始管路结构的设计，通过取点，连线，参数修改进行结构的设计。左侧操作面板顶部有六大按钮，对应功能如下：

拖动：点击按下之后可进行绘图区域的拖动功能。再次点击按钮抬起则拖动功能暂时禁止。

取点：点击之后可进行滑油管路节点的生成，并且此功能是建立油泵类型节点和三通管类型节点的先决条件，即后两者类型节点须在此按钮按下的先决条件下才可生成。

连接：按下按钮，连接功能开启，选中一个节点按下不抬起，即可动态拉伸出一条直线，直至到达另一个节点抬起，管道即可建立成功，默认此拉伸方向为润滑油流向（仅作参考）。

油泵：此按钮需搭配“取点”按钮，在“取点”按钮按下之后，再按下“油泵”按钮，在绘图区域取点可生成“油泵”类型节点，再将此按钮抬起，取点油泵类型节点功能暂时关闭。

管件：此按钮需搭配“取点”按钮，在“取点”按钮按下之后，再按下“管件”按钮，然后在绘图区域取点可生成“三通管”类型节点，再将此按钮抬起，取点三通管类型节点功能暂时关闭。

删除：此按钮按下可删除绘图区域内节点与管路，注意，删除节点时会删除其连接的所有管路，删除管路则只会删除管路。

（三）参数输入与数据库管件选择

针对已经建立好的初步管路系统模型，可双击结构内的节点，唤起管件选择及结构参数输入窗口，工程师可以从管件数据库中选择不同类型的管道组件（如油品、弯头、管路长度以及直径等），根据具体需求快速组装复杂的管路系统。管件库的多样性使得设计过程更加灵活，并且可以有效减少管件选型和配置的时间。

每个选定的节点都可以通过参数化配置来满足不同的工程需求。用户可以自定义管件的尺寸、材料、流量、压力等关键参数，确保设计的精确性和适用性。

对于普通类型节点，双击即可打开节点参数修改弹窗窗口，如图7所示：以节点P6为示例，此节点包含高度参数、弯头类型、以及流向其的管道L10的参数及零件选择。高度参数为自输入超过0的值；弯头类型包括四个类型：45°弯头、②90°弯头、③变径管；管道为GB刚质无缝管道，管道长度为自输入超过0的值，管道直径为可选项：6、8、10、15、20、25、32、40、50、65、80、100、125、150，单位mm。

系统内所有管道的参数都需要在该段管道的终点节点进行修改，弯头类型的选择需用户根据管道结构，例中P6节点属于90°转弯处，故此节点应配备90°弯头。如图4.8所示：

 

图 4.8 参数数据输入与管件类型选择

对于特殊节点例如分流、合流，双击节点，在弹窗中进行三通管的参数修改，在弹窗中的显示如图10所示：与其余节点不同的是，三通管节点不需要用户选定三通类型，系统会根据管路结构判定三通管类型。三通管节点代表一个实物节点，但在仿真过程中其由三个虚拟节点构成，分别是一个流进口的数据节点，两个流出口数据节点。可以修改的数据主要有三通节点的高度以及以三通节点作为终点的上一段管的管长与直径。三通节点还提供两条支路的自定义修改流出流量，若不进行修改，则系统会按照支路位置和管道参数进行仿真计算。若对其中一条支路进行流量指定，那么系统将按照指定值进行支路的流量压力值的仿真计算。

图 4.9 三通管类型节点参数设置

（三）仿真计算与结果输出

对已经完成结构构建以及参数化设置的管路系统，单击菜单栏“压力计算”按钮，在经过数据处理和结构分析之后，开始仿真计算，计算结果将显示在下方计算结果区域。如图4.10所示，第一列为节点名称，第二列为节点压力数据，第三列为当前节点流出流量值。

图 4.10 仿真计算结果

针对已经计算完成的结果，进行xlsx格式文件导出，生成Excel可修改编辑的文件，可对xlsx文件进行修改与注释，如图4.11。对于计算过程中的问题，进行相应的日志信息输出，比如计算所需参数的缺失，计算结果的异常等。对正常的分析也会由新的分析已完成的提示输出。如图4.12所示。

图 4.11 计算结果导出

图 4.12 日志信息输出

4.5.3 后端仿真计算服务集成

4.6 本章小结

本章针对润滑系统仿真的技术瓶颈，提出了LAHI分层自适应混合迭代算法，通过基于非线性强度的计算分层与动态耦合策略，有效平衡了计算精度与效率；在此基础上，构建了参数化液压元件模型库以支撑精准计算，并最终成功将核心算法集成至自主开发的仿真软件平台，实现了从理论模型到具备图形化建模、仿真分析与结果可视化功能的工程实用软件的跨越，为后续实验验证与应用奠定了核心基础。

第5章 工程验证与多工况性能测试

5.1 验证目的与方案

本章旨在通过物理实验，对第四章所提出的分层自适应混合迭代算法（LAHI）及自主开发的仿真设计平台的准确性与工程适用性进行实证检验。具体将通过搭建真实的管路试验台，在系统关键节点布置传感器以获取压力、流量等核心参数的真实数据，并与仿真平台的计算结果进行系统性对比，从而定量评估算法的有效性与平台的可靠性。

实验验证是连接理论模型与工程应用的关键环节。本章工作的意义在于，其结果的吻合程度将直接证明从核心算法到软件实现的整体技术路线的正确性，为所述方法的可行性与实用价值提供最直接的客观证据，也为该仿真平台最终的工业应用奠定坚实的实践基础。

5.1.1 验证总体方案：可以用框图形式展示。是采用“仿真+实验”相结合的方式？还是纯实验验证？各个测试环节如何衔接？

5.1.2 测试平台/环境介绍

硬件平台：列出所有使用的硬件设备(传感器、执行器、控制器、数据采集卡等)的型号、规格和精度。附上平台实物图或连接示意图。

软件环境：说明操作系统、开发语言、编译器、使用的仿真软件(MATLAB/Simulink, ANSYS, ADAMS等)及其版本。

测试对象：明确你的测试对象是什么(是软件代码、硬件原型，还是软硬件结合的系统？)。

5.2 管路试验台设计与搭建

为准确验证仿真平台的可靠性，本章设计并搭建了一套专用于船用齿轮箱润滑系统测试的管路试验台。该试验台的核心设计目标是复现实际系统中复杂的管路网络与多支路分流特性，并能够精确测量关键液压参数。实验台采用模块化设计思想，主要由动力单元、主管路回路、并联支路模块以及油箱与冷却单元构成。动力单元为系统提供可控的油液流量；主管路模拟系统的主供油路；并联支路模块则通过安装不同的节流阀与被测元件（如喷嘴、滑阀等），以模拟齿轮箱中各润滑点的实际工况与流量分配。

基于上述原理，搭建的试验台实物全貌如图5.1所示。试验台主体采用工业标准的液压元器件与不锈钢管路进行连接，确保系统的耐压性与密封性。为精确调控系统工况，在动力单元中采用了驱动油泵，从而实现流量的无级调节。在各并联支路的末端均安装了精密调节阀，用于精确设定各支路的流量，以模拟不同的负载条件。在试验台主要节点添加限流孔板，获得实验数据。

图 5.1 试验台如图所示

5.3 实验方法与测试工况

5.4 结果对比与分析

对比对象：必须设置一个或多个对比基线。

你提出的新算法 vs. 传统经典算法

你优化的新模型 vs. 原始未优化模型

你设计的新系统 vs. 现有商用系统

5.5 本章小结

第6章 结论与工业应用展望

本文创新性成果：

1\. 船用齿轮润滑系统专用仿真软件的自主开发与集成

提出XX算法，基于C++/Python等语言，结合开源计算库，自主开发一款集成核心算法的专用仿真软件。该软件可实现从三维CAD模型导入、网格自动划分、参数设置、多物理场耦合求解到后处理可视化的全流程一体化。

2\. 参数化建模与自动化仿真流程的实现

开发参数化建模模块。只需输入关键结构参数、润滑油牌号、工况条件等，软件即可自动生成或修改仿真模型，极大简化前处理工作，实现“设计-仿真-结果分析”的自动化闭环流程。

参考文献

附件10：“参考文献”样式

\[1\] 张昆，冯立群，余昌钰，等. 机器人柔性手腕的球面齿轮设计研究\[J\]. 清华大学学报，1994，34（2）：1~7.

\[2\] 竺可桢. 物理学\[M\]. 北京：科学出版社，1973. 56~60.

\[3\] Dupont B. Bone marrow transplantation in severe combined immunodeficiency with an unrelated MLC compatible donor\[C\]. In: White H J, Smith R, eds. Proceedings of the Third Annual Meeting of the International Society for Experimental Hematology. Houston: International Society for Experimental Hematology, 1974. 44~46.

\[4\] 郑开青. 通讯系统模拟及软件\[D\]. 北京：清华大学无线电系，1987.

\[5\] 姜锡洲. 一种温热外敷药制备方法\[P\]. 中国专利，881056073，1980-07-26.

\[6\] 中华人民共和国国家技术监督局. GB3100~3102. 中华人民共和国国家标准－量和单位\[S\]. 北京：中国标准出版社，1994-11-01.